"use strict";(self.webpackChunkxyz_chatboxapp_ce=self.webpackChunkxyz_chatboxapp_ce||[]).push([[7703],{37703:(e,t,s)=>{s.r(t),s.d(t,{tickStorageTask:()=>f});var a=s(46929),o=s(88194),r=s(25203),n=s(36920),i=s(12268);async function f(){const e=await i.A.getBlobKeys(),t=["picture:","file:","parseUrl-","parseFile-"],s=e.filter((e=>t.some((t=>e.startsWith(t)))));if(0===s.length)return;const n=new Set(s),f=await(0,o.hK)();for(const e of f){const t=await i.A.getItem(a.CB.session(e.id),null);if(t){for(const e of t.messages){for(const t of e.pictures||[])t.storageKey&&n.delete(t.storageKey);for(const t of e.files||[])t.storageKey&&n.delete(t.storageKey);for(const t of e.contentParts||[])"image"===t.type&&t.storageKey&&n.delete(t.storageKey);for(const t of e.links||[])t.storageKey&&n.delete(t.storageKey);if(0===n.size)return}t.assistantAvatarKey&&n.delete(t.assistantAvatarKey)}}const c=r.dK.getState().getSettings();c.userAvatarKey&&n.delete(c.userAvatarKey),c.defaultAssistantAvatarKey&&n.delete(c.defaultAssistantAvatarKey);for(const e of n)await i.A.delBlob(e)}"desktop"!==n.A.type&&setTimeout((()=>{f()}),1e4)}}]);
//# sourceMappingURL=7703.d121fe515cb7a287b8db.js.map