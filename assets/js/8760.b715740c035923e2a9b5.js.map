{"version":3,"file":"assets/js/8760.b715740c035923e2a9b5.js","mappings":"0eAeO,SAASA,GAAsB,SAAEC,EAAQ,MAAEC,EAAK,MAAEC,EAAQ,QAAO,KAAEC,IACxE,MAAMC,GAAQ,UACR,EAAEC,IAAM,WACPC,EAAeC,IAAoB,IAAAC,WAAS,GAE7CC,EAAiE,CACrEC,MAAO,CACLR,MAAOE,EAAMO,QAAQD,MAAME,aAC3BC,gBAAiBT,EAAMO,QAAQD,MAAMI,KACrC,UAAW,CACTZ,MAAOE,EAAMO,QAAQD,MAAME,aAC3BC,gBAAiBT,EAAMO,QAAQD,MAAMI,OAGzCC,QAAS,CACPb,MAAOE,EAAMO,QAAQI,QAAQH,aAC7BC,gBAAiBT,EAAMO,QAAQI,QAAQD,KACvC,UAAW,CACTZ,MAAOE,EAAMO,QAAQI,QAAQH,aAC7BC,gBAAiBT,EAAMO,QAAQI,QAAQD,QAiB7C,OAAOR,GACL,UAACU,EAAA,EAAQ,CACPC,eAAa,EACbC,QAAS,KACPlB,IACAO,GAAiB,EAAM,EAEzBY,GAAIV,EAAiBP,GAAM,WAE3B,SAACkB,EAAA,EAAS,CAACC,SAAS,WACpB,uBAAIhB,EAAE,kBAGR,UAACW,EAAA,EAAQ,CACPC,eAAa,EACbC,QAAS,KACPX,GAAiB,IAEO,QAAgB,WAEtCP,IACAO,GAAiB,GACnB,EAEFY,GArCiE,CACnET,MAAO,CACL,UAAW,CACTG,gBAAiB,yBAGrBE,QAAS,CACP,UAAW,CACTF,gBAAiB,4BA6BAX,GAAM,UAExBC,IAAQ,SAACmB,EAAA,EAAU,CAACD,SAAS,UAC7BpB,GAASI,EAAE,YAGlB,C,iFC5EA,MA8DA,GA9DmB,EAAAkB,EAAA,KAAQC,IACzB,MAAMC,GAAW,UACjB,OACE,SAACC,EAAA,EAAI,CACHC,IAAkB,OAAbF,EAAoB,MAAQ,MACjCG,UAAW,EACXC,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdE,eAAgB,CACdC,KAAM,GACNC,MAAO,OAELX,GAEP,GApBgB,EAqBhB,EAAGpB,YAAY,CAChB,mBAAoB,CAClBS,gBAAwC,SAAvBT,EAAMO,QAAQyB,KAAkBhC,EAAMO,QAAQ0B,KAAK,KAAOjC,EAAMO,QAAQ0B,KAAK,KAC9FC,aAAc,EACdC,UAAWnC,EAAMoC,QAAQ,GACzBC,SAAU,IACVvC,MAA8B,UAAvBE,EAAMO,QAAQyB,KAAmB,kBAAoBhC,EAAMO,QAAQ0B,KAAK,KAC/EK,UACE,uJACF,kBAAmB,CACjBC,QAAS,SAEX,sBAAuB,CACrBA,QAAS,MACT,qBAAsB,CACpBzC,MAAOE,EAAMO,QAAQiC,KAAKC,UAC1BC,YAAa1C,EAAMoC,QAAQ,MAE7B,WAAY,CACV3B,iBAAiB,QAAMT,EAAMO,QAAQoC,QAAQjC,KAAMV,EAAMO,QAAQqC,OAAOC,mBAG5E,OAAQ,CACNC,OAAQ,UAGZ,sCAAuC,CACrCC,MAAO,OAET,4CAA6C,CAC3CC,WAAY,eAEd,4CAA6C,CAC3CvC,gBAAwC,UAAvBT,EAAMO,QAAQyB,KAAmB,YAAc,YAChEE,aAAc,OAEhB,kDAAmD,CACjDzB,gBAAwC,UAAvBT,EAAMO,QAAQyB,KAAmB,YAAc,iB,qEC5BpE,SAASiB,EAAS7B,GAChB,MAAM,IAEF,WACG8B,EAAUC,GAAe,WAAmC,MAC7DC,EAAOC,QAAQH,GAafI,EAAY,KAChBH,EAAY,KAAK,EAEnB,OAAO,UAACI,EAAA,EAAG,CAACxC,GAAI,CACdyC,QAAS,OACTC,cAAe,MACfC,WAAY,SACZnB,QAAS,YACToB,OAAQ,OACRC,OAAQ,UACR1B,aAAc,MACd2B,OAAQ,YACRC,YAAa9D,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,2BAA6B,UACnFvB,gBAAiBT,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,4BAA8B,OACxF+B,WAAY,WACZ,aAAc,CACZC,QAAS,GAEX,UAAW,CACTF,YAAa9D,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,2BAA6B,UACnFvB,gBAAiBT,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,4BAA8B,WAE1F,qBAAsB,CACpBgC,QAAS,IAEVlD,QArCoBmD,IACrBA,EAAMC,iBACFd,GAGJhC,EAAM+C,UAAU,EAgCO,WACrB,SAACC,EAAAC,EAAM,CAACtD,GAAI,CACZgC,MAAO,OACPY,OAAQ,OACRlD,gBAAiBT,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,2BAA6B,WACtFsC,IAAKlD,EAAMmD,OAAOC,UACnB,SAACjB,EAAA,EAAG,CAACxC,GAAI,CACT0D,WAAY,OACZC,KAAM,EACNC,SAAU,UACX,UACG,SAACC,EAAA,EAAU,CAACC,QAAQ,QAAQC,QAAM,EAAC/D,GAAI,CACvCE,SAAU,OACV8D,WAAY,IACZjF,MAAOE,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,OAAS,WAC1D,SACIZ,EAAMmD,OAAOS,SAIF,UAAf5D,EAAMY,OAAoB,iCACvB,SAACuB,EAAA,EAAG,CAACxC,GAAI,CACXyC,QAAS,OACTE,WAAY,SACZe,WAAY,QACb,UACK,SAACQ,EAAA,EAAU,CAACnE,QAxDJmD,IAChBA,EAAMiB,kBACNjB,EAAMC,iBACNf,EAAYc,EAAMkB,cAAc,EAqDOpE,GAAI,CACrCwB,QAAS,MACTzC,MAAOE,GAAgC,SAAvBA,EAAMO,QAAQyB,KAAkB,OAAS,WAC1D,SACMZ,EAAMmD,OAAOa,SAAU,SAACC,EAAA,EAAQ,CAACpE,SAAS,QAAQF,GAAI,CACzDjB,MAAO,cACD,SAACwF,EAAA,EAAqB,CAACC,UAAU,YAAYtE,SAAS,eAG9D,UAAC,EAAU,CAACuE,cAAe,CAC7B,kBAAmB,eAClBtC,SAAUA,EAAUE,KAAMA,EAAMqC,QAASnC,EAAS,WAC/C,SAAC1C,EAAA,EAAQ,CAAcE,QAAS,KAClCM,EAAMsE,gBACNpC,GAAW,EACVzC,eAAa,WACTO,EAAMmD,OAAOa,SAAU,iCACpB,SAACO,EAAA,EAAe,CAAC1E,SAAS,UACzBhB,EAAE,cACC,iCACJ,SAACoF,EAAA,EAAQ,CAACpE,SAAS,UAClBhB,EAAE,YATM,SAaf,UAACW,EAAA,EAAQ,CAAcE,QAAS,KAClCM,EAAMwE,SACNtC,GAAW,EACVzC,eAAa,aACV,SAACgF,EAAA,EAAQ,IACR5F,EAAE,UALU,SAQf,SAAC6F,EAAA,EAAO,CAAC/E,GAAI,CACfgF,GAAI,OAGF,SAACpG,EAAqB,CAACC,SAAU,KACnCuD,EAAY,MACZG,IACAlC,EAAM4E,UAAU,YAK1B,CAQA,SAASC,EAAY7E,GACnB,MAAM,IAEF,UACEpB,GAAQ,SACRkG,GAAgB,WACfC,EAAaC,IAAkB,IAAAhG,UAAwBgB,EAAMiF,gBACpE,IAAAC,YAAU,KACRF,EAAehF,EAAMiF,cAAc,GAClC,CAACjF,EAAMiF,gBACV,MAAOE,EAAaC,IAAkB,IAAApG,UAAS,CAC7C4E,MAAM,wBACNyB,QAAQ,0BAEJC,EAAgBC,GACZ1C,IACNuC,EAAe,CACbxB,MAAM,wBACNyB,QAAQ,0BAEVL,EAAe,IACVD,EACH,CAACQ,GAAQ1C,EAAM2C,OAAOC,OACtB,EAgCN,OAAO,UAACtD,EAAA,EAAG,CAACxC,GAAI,CACd+F,aAAc,OACdrG,gBAAwC,SAAvBT,EAAMO,QAAQyB,KAAkBhC,EAAMO,QAAQ0B,KAAK,KAAOjC,EAAMO,QAAQ0B,KAAK,IAC9FM,QAAS,OACV,WACG,SAACwE,EAAA,EAAS,CAACC,WAAYd,EAAepD,OAAO,QAAQjD,MAAOI,EAAE,gBAAiBgH,WAAS,EAACpC,QAAQ,WAAWqC,YAAajH,EAAE,iBAAmB,GAAI4G,MAAOV,EAAYnB,KAAMmC,SAAUT,EAAa,QAASU,WAAYb,EAAYvB,QACnO,SAAC+B,EAAA,EAAS,CAACjE,OAAO,QAAQjD,MAAOI,EAAE,kBAAmBiH,YAAajH,EAAE,wBAA0B,GAAIgH,WAAS,EAACpC,QAAQ,WAAWwC,WAAS,EAACC,QAAS,EAAGC,QAAS,GAAIV,MAAOV,EAAYM,OAAQU,SAAUT,EAAa,UAAWU,WAAYb,EAAYE,UACxP,SAACM,EAAA,EAAS,CAACjE,OAAO,QAAQjD,MAAOI,EAAE,sBAAuBiH,YAAY,uBAAuBD,WAAS,EAACpC,QAAQ,WAAWgC,MAAOV,EAAY3B,OAAQ2C,SAAUT,EAAa,aAC5K,UAACnD,EAAA,EAAG,CAACxC,GAAI,CACTyC,QAAS,OACTgE,eAAgB,iBACjB,WACG,SAACC,EAAA,EAAS,CAACC,KAAG,YACZ,SAACC,EAAA,EAAgB,CAACC,SAAS,SAAC,IAAM,IAAK/H,MAAOI,EAAE,sBAAuB4H,QAAS1B,EAAY2B,OAAQX,SAAU,CAACY,EAAIF,IAAYzB,EAAe,IAC3ID,EACH2B,OAAQD,SAGV,UAACG,EAAA,EAAW,YACV,SAAC,IAAM,CAACnD,QAAQ,WAAW/D,QAAS,IAAMM,EAAM6G,QAAO,SACpDhI,EAAE,aAEL,SAAC,IAAM,CAAC4E,QAAQ,YAAY/D,QAnDvB,KACXqF,EAAYnB,KAAOmB,EAAYnB,KAAKkD,OACpC/B,EAAYM,OAASN,EAAYM,OAAOyB,OACpC/B,EAAY3B,SACd2B,EAAY3B,OAAS2B,EAAY3B,OAAO0D,QAEV,IAA5B/B,EAAYnB,KAAKmD,OASa,IAA9BhC,EAAYM,OAAO0B,QASvB/G,EAAMgH,KAAKjC,IACX,OAAc,iBAAkB,CAC9BkC,eAAgB,UAVhB7B,EAAe,IACVD,EACHE,QAAQ,cAAG6B,MAAO,CAChBxI,MAAO,OACR,SAAGG,EAAE,uBAbRuG,EAAe,IACVD,EACHvB,MAAM,cAAGsD,MAAO,CACdxI,MAAO,OACR,SAAGG,EAAE,sBAgBR,EAwB6C,SACtCA,EAAE,kBAKf,CACOsI,eAAeC,IAEpB,MAAO,CACLC,GAAI,UAFaC,EAAA,EAASC,aAEdC,SAAQ,WACpB5D,KAAM,GACNR,OAAQ,GACRiC,OAAQ,GACRrB,SAAS,EACTyD,UAAW,EACXf,QAAQ,EAEZ,CACA,MAAMgB,EAAiB,WACrB,MAAO1F,EAAM2F,IAAW,IAAA3I,WAAS,GAC3B4I,GAA2B,QAAWC,GAAKA,EAAED,2BAC7CE,GAA8B,QAAWD,GAAKA,EAAEC,8BAChDC,GAAW,EAAAC,EAAA,MACX,EACJnJ,IACE,UACEoJ,GAAQ,UAEZC,SAAUC,IACR,SAIEC,EAAiBjF,IACrB,MAAMkF,EAAY,IACblF,EACHsE,WAAYtE,EAAOsE,WAAa,GAAK,GAEnCY,EAAU3B,QACZ4B,EAAA,GAA0BD,GAE5BJ,EAAMM,YAAYF,GAClBN,EAAS,CACPS,GAAI,IACJC,OAAQ,CACNC,UAAWvF,EAAOkE,MAdtBM,GAAQ,EAiBK,GAER5C,EAAaC,IAAkB,IAAAhG,UAA+B,OACrE,IAAAkG,YAAU,KACHlD,GAGH,OAAc,iBAAkB,CAC9BiF,eAAgB,gBAHlBjC,EAAe,KAKjB,GACC,CAAChD,IACJ,MAAM2G,EAAO,IAAIV,EAAMC,SAASU,QAAOC,GAAQA,EAAK7E,UAAS8E,MAAK,CAACC,EAAGC,IAAMA,EAAEvB,UAAYsB,EAAEtB,eAAeQ,EAAMC,SAASU,QAAOC,IAASA,EAAK7E,UAAS8E,MAAK,CAACC,EAAGC,IAAMA,EAAEvB,UAAYsB,EAAEtB,aACvL,OAAO,SAACwB,EAAA,EAAI,CAACC,MAAOrK,EAAE,eAAc,UAChC,gBAAKsF,UAAU,wBAAuB,SACnCY,GAAc,SAACF,EAAW,CAACI,cAAeF,EAAa8B,MAAO,KAC/D7B,EAAe,KAAK,EACnBgC,KAAM7D,IACP8E,EAAMM,YAAYpF,GAClB6B,EAAe,KAAK,KACd,iCAEF,UAAC7C,EAAA,EAAG,CAACxC,GAAI,CACXwJ,GAAI,GACL,WACK,SAACC,EAAA,EAAI,CAACC,KAAK,KAAKC,GAAI,IAAKH,GAAI,EAAGI,EAAE,kBAAiB,SAChD1K,EAAE,eAEL,SAACsD,EAAA,EAAG,CAACxC,GAAI,CACXyC,QAAS,OACTE,WAAY,SACZkH,IAAK,GACN,UACK,SAAC,IAAa,CAAC/C,QAASmB,EAA0B7B,SAAUlD,GAASiF,EAA4BjF,EAAMkB,cAAc0C,SAAUhI,MAAOI,EAAE,wCAK5I,UAACsD,EAAA,EAAG,CAACxC,GAAI,CACXwJ,GAAI,GACL,WACK,SAACC,EAAA,EAAI,CAACC,KAAK,KAAKC,GAAI,IAAKH,GAAI,EAAGI,EAAE,kBAAiB,SAChD1K,EAAE,kBAGL,SAAC,IAAa,CAAC4E,QAAQ,QAAQ/E,MAAM,OAAO+K,aAAa,SAACC,EAAA,EAAY,CAAC/K,KAAMgL,EAAA,EAAUN,KAAM,KAAQF,GAAI,GAAIzJ,QAAS,KACxH0H,IAAkBwC,KAAK5E,EAAe,EACvC,SACMnG,EAAE,yBAGL,SAACsD,EAAA,EAAG,CAACxC,GAAI,CACXyC,QAAS,OACTyH,oBAAqB,wCACrBL,IAAK,KACN,SACMb,EAAKmB,KAAI,CAACjB,EAAMkB,KAAO,SAAClI,EAAQ,CAA0BjB,KAAK,QAAQuC,OAAQ0F,EAAM9F,SAAU,IAAMqF,EAAcS,GAAOvE,cAAe,KAC5I2D,EAAMM,YAAY,IACbM,EACH7E,SAAU6E,EAAK7E,SACf,EACDQ,OAAQ,KACTQ,EAAe6D,EAAK,EACnBjE,SAAU,KACXqD,EAAM+B,OAAOnB,EAAKxB,GAAG,GARoB,GAAGwB,EAAKxB,MAAM0C,aAczD,UAAC5H,EAAA,EAAG,YACF,SAACiH,EAAA,EAAI,CAACC,KAAK,KAAKC,GAAI,IAAKH,GAAI,EAAGI,EAAE,kBAAiB,SAChD1K,EAAE,uBAGL,SAACsD,EAAA,EAAG,CAACxC,GAAI,CACXyC,QAAS,OACTyH,oBAAqB,wCACrBL,IAAK,KACN,SACMrB,GAAgB2B,KAAI,CAACjB,EAAMkB,KAAO,SAAClI,EAAQ,CAA0BjB,KAAK,SAASuC,OAAQ0F,EAAM9F,SAAU,IAAMqF,EAAcS,IAA9E,GAAGA,EAAKxB,MAAM0C,kBAMhF,C,iHCzWA,MAAME,GAAiB,QAAiC,IAAWC,WAAY,GAAI,KAE5E,SAASC,IACd,MAAOjC,EAAUkC,IAAe,QAAQH,GAuBxC,MAAO,CACL/B,WACAK,YAvBmB/C,IACnB4E,GAAalC,IACX,IAAImC,GAAQ,EACZ,MAAMC,EAAcpC,EAAS4B,KAAKP,GAC5BA,EAAElC,KAAO7B,EAAO6B,IAClBgD,GAAQ,EACD7E,GAEF+D,IAKT,OAHKc,GACHC,EAAYC,KAAK/E,GAEZ8E,CAAW,GAClB,EAUFN,OAPc3C,IACd+C,GAAalC,GAAaA,EAASU,QAAQW,GAAMA,EAAElC,KAAOA,KAAI,EAQlE,CAEO,SAASmD,IACd,MAAMvK,GAAW,WACTwK,KAAMvC,KAAawC,IAAW,OAAS,CAC7CC,SAAU,CAAC,kBAAmB1K,GAC9B2K,QAAS,IAAM,KAAoB3K,GACnC4K,YAAa,GACbC,qBAAsB,EACtBC,UAAW,OAEb,MAAO,CAAE7C,cAAawC,EACxB,C","sources":["webpack://xyz.chatboxapp.ce/./src/renderer/components/ConfirmDeleteButton.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/StyledMenu.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/routes/copilots.tsx?d942","webpack://xyz.chatboxapp.ce/./src/renderer/hooks/useCopilots.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { MenuItem, Button } from '@mui/material'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport CheckIcon from '@mui/icons-material/Check'\nimport { SxProps, useTheme } from '@mui/material/styles'\nimport { useTranslation } from 'react-i18next'\nimport { isHotkeyPressed } from 'react-hotkeys-hook'\n\ninterface Props {\n  onDelete: () => void\n  label?: string | null | undefined\n  color?: 'error' | 'warning'\n  icon?: React.ReactNode\n}\n\nexport function ConfirmDeleteMenuItem({ onDelete, label, color = 'error', icon }: Props) {\n  const theme = useTheme()\n  const { t } = useTranslation()\n  const [confirmDelete, setConfirmDelete] = useState(false)\n\n  const confirmStyleHash: Record<NonNullable<Props['color']>, SxProps> = {\n    error: {\n      color: theme.palette.error.contrastText,\n      backgroundColor: theme.palette.error.main,\n      '&:hover': {\n        color: theme.palette.error.contrastText,\n        backgroundColor: theme.palette.error.main,\n      },\n    },\n    warning: {\n      color: theme.palette.warning.contrastText,\n      backgroundColor: theme.palette.warning.main,\n      '&:hover': {\n        color: theme.palette.warning.contrastText,\n        backgroundColor: theme.palette.warning.main,\n      },\n    },\n  }\n  const hoverStyleHash: Record<NonNullable<Props['color']>, SxProps> = {\n    error: {\n      '&:hover': {\n        backgroundColor: 'rgba(255, 0, 0, 0.1)',\n      },\n    },\n    warning: {\n      '&:hover': {\n        backgroundColor: 'rgba(255, 165, 0, 0.1)',\n      },\n    },\n  }\n\n  return confirmDelete ? (\n    <MenuItem\n      disableRipple\n      onClick={() => {\n        onDelete()\n        setConfirmDelete(false)\n      }}\n      sx={confirmStyleHash[color]}\n    >\n      <CheckIcon fontSize=\"small\" />\n      <b>{t('Confirm?')}</b>\n    </MenuItem>\n  ) : (\n    <MenuItem\n      disableRipple\n      onClick={() => {\n        setConfirmDelete(true)\n        // 按住 shift 键可以跳过确认直接删除\n        const shiftKeyPressed = isHotkeyPressed('shift')\n        if (shiftKeyPressed) {\n          onDelete()\n          setConfirmDelete(false)\n        }\n      }}\n      sx={hoverStyleHash[color]}\n    >\n      {icon || <DeleteIcon fontSize=\"small\" />}\n      {label || t('delete')}\n    </MenuItem>\n  )\n}\n\nexport function ConfirmDeleteButton({ onDelete, icon, label, color = 'error' }: Props) {\n  const { t } = useTranslation()\n  const [confirmDelete, setConfirmDelete] = useState(false)\n  const theme = useTheme()\n\n  const confirmStyleHash: Record<NonNullable<Props['color']>, SxProps> = {\n    error: {\n      color: theme.palette.error.contrastText,\n      backgroundColor: theme.palette.error.main,\n      '&:hover': {\n        color: theme.palette.error.contrastText,\n        backgroundColor: theme.palette.error.main,\n      },\n    },\n    warning: {\n      color: theme.palette.warning.contrastText,\n      backgroundColor: theme.palette.warning.main,\n      '&:hover': {\n        color: theme.palette.warning.contrastText,\n        backgroundColor: theme.palette.warning.main,\n      },\n    },\n  }\n\n  const hoverStyleHash: Record<NonNullable<Props['color']>, SxProps> = {\n    error: {\n      '&:hover': {\n        backgroundColor: 'rgba(255, 0, 0, 0.1)',\n      },\n    },\n    warning: {\n      '&:hover': {\n        backgroundColor: 'rgba(255, 165, 0, 0.1)',\n      },\n    },\n  }\n\n  return confirmDelete ? (\n    <Button\n      variant=\"contained\"\n      onClick={() => {\n        onDelete()\n        setConfirmDelete(false)\n      }}\n      sx={confirmStyleHash[color]}\n      startIcon={<CheckIcon />}\n    >\n      <b>{t('Confirm?')}</b>\n    </Button>\n  ) : (\n    <Button\n      variant=\"text\"\n      onClick={() => {\n        setConfirmDelete(true)\n        // 按住 shift 键可以跳过确认直接删除\n        const shiftKeyPressed = isHotkeyPressed('shift')\n        if (shiftKeyPressed) {\n          onDelete()\n          setConfirmDelete(false)\n        }\n      }}\n      sx={hoverStyleHash[color]}\n      startIcon={icon || <DeleteIcon />}\n    >\n      {label || t('delete')}\n    </Button>\n  )\n}\n","import { Menu, type MenuProps } from '@mui/material'\nimport 'katex/dist/katex.min.css'\nimport { alpha, styled } from '@mui/material/styles'\nimport { useLanguage } from '@/stores/settingsStore'\n\nconst StyledMenu = styled((props: MenuProps) => {\n  const language = useLanguage()\n  return (\n    <Menu\n      dir={language === 'ar' ? 'rtl' : 'ltr'}\n      elevation={0}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'right',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      PopoverClasses={{\n        root: '',\n        paper: '',\n      }}\n      {...props}\n    />\n  )\n})(({ theme }) => ({\n  '& .MuiPaper-root': {\n    backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[800] : theme.palette.grey[100],\n    borderRadius: 6,\n    marginTop: theme.spacing(1),\n    minWidth: 140,\n    color: theme.palette.mode === 'light' ? 'rgb(55, 65, 81)' : theme.palette.grey[300],\n    boxShadow:\n      'rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px',\n    '& .MuiMenu-list': {\n      padding: '0px 0',\n    },\n    '& .MuiMenuItem-root': {\n      padding: '8px',\n      '& .MuiSvgIcon-root': {\n        color: theme.palette.text.secondary,\n        marginRight: theme.spacing(1.5),\n      },\n      '&:active': {\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity),\n      },\n    },\n    '& hr': {\n      margin: '2px 0',\n    },\n  },\n  '& .MuiPaper-root::-webkit-scrollbar': {\n    width: '6px',\n  },\n  '& .MuiPaper-root::-webkit-scrollbar-track': {\n    background: 'transparent',\n  },\n  '& .MuiPaper-root::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.mode === 'light' ? '#0000001a' : '#ffffff1a',\n    borderRadius: '4px',\n  },\n  '& .MuiPaper-root::-webkit-scrollbar-thumb:hover': {\n    backgroundColor: theme.palette.mode === 'light' ? '#0000003a' : '#ffffff3a',\n  },\n}))\n\nexport default StyledMenu\n","import { Button as MantineButton, Switch as MantineSwitch, Text } from '@mantine/core';\nimport EditIcon from '@mui/icons-material/Edit';\nimport MoreHorizOutlinedIcon from '@mui/icons-material/MoreHorizOutlined';\nimport StarIcon from '@mui/icons-material/Star';\nimport StarOutlineIcon from '@mui/icons-material/StarOutline';\nimport { Avatar, Box, Button, ButtonGroup, Divider, FormControlLabel, FormGroup, IconButton, MenuItem, Switch, TextField, Typography, useTheme } from '@mui/material';\nimport { IconPlus } from '@tabler/icons-react';\nimport { useNavigate } from '@tanstack/react-router';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ConfirmDeleteMenuItem } from '@/components/ConfirmDeleteButton';\nimport Page from '@/components/Page';\nimport { ScalableIcon } from '@/components/ScalableIcon';\nimport StyledMenu from '@/components/StyledMenu';\nimport { useMyCopilots, useRemoteCopilots } from '@/hooks/useCopilots';\nimport { useIsSmallScreen } from '@/hooks/useScreenChange';\nimport { trackingEvent } from '@/packages/event';\nimport * as remote from '@/packages/remote';\nimport platform from '@/platform';\nimport { useUIStore } from '@/stores/uiStore';\nimport type { CopilotDetail } from '../../shared/types';\nimport { Route } from \"D:/Downloads/chatbox-main/src/renderer/routes/copilots.tsx\";\ntype MiniItemProps = {\n  mode: 'local';\n  detail: CopilotDetail;\n  selectMe(): void;\n  switchStarred(): void;\n  editMe(): void;\n  deleteMe(): void;\n} | {\n  mode: 'remote';\n  detail: CopilotDetail;\n  selectMe(): void;\n};\nfunction MiniItem(props: MiniItemProps) {\n  const {\n    t\n  } = useTranslation();\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n  const selectCopilot = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    if (open) {\n      return;\n    }\n    props.selectMe();\n  };\n  const openMenu = (event: React.MouseEvent<HTMLElement>) => {\n    event.stopPropagation();\n    event.preventDefault();\n    setAnchorEl(event.currentTarget);\n  };\n  const closeMenu = () => {\n    setAnchorEl(null);\n  };\n  return <Box sx={{\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: '10px 16px',\n    height: '49px',\n    cursor: 'pointer',\n    borderRadius: '8px',\n    border: '1px solid',\n    borderColor: theme => theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : '#dee2e6',\n    backgroundColor: theme => theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.03)' : '#fff',\n    transition: 'all 0.2s',\n    '.edit-icon': {\n      opacity: 0\n    },\n    '&:hover': {\n      borderColor: theme => theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.2)' : '#adb5bd',\n      backgroundColor: theme => theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.05)' : '#f8f9fa'\n    },\n    '&:hover .edit-icon': {\n      opacity: 1\n    }\n  }} onClick={selectCopilot}>\n      <Avatar sx={{\n      width: '28px',\n      height: '28px',\n      backgroundColor: theme => theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : '#e9ecef'\n    }} src={props.detail.picUrl} />\n      <Box sx={{\n      marginLeft: '12px',\n      flex: 1,\n      overflow: 'hidden'\n    }}>\n        <Typography variant=\"body1\" noWrap sx={{\n        fontSize: '14px',\n        fontWeight: 400,\n        color: theme => theme.palette.mode === 'dark' ? '#fff' : '#212529'\n      }}>\n          {props.detail.name}\n        </Typography>\n      </Box>\n\n      {props.mode === 'local' && <>\n          <Box sx={{\n        display: 'flex',\n        alignItems: 'center',\n        marginLeft: 'auto'\n      }}>\n            <IconButton onClick={openMenu} sx={{\n          padding: '4px',\n          color: theme => theme.palette.mode === 'dark' ? '#fff' : '#495057'\n        }}>\n              {props.detail.starred ? <StarIcon fontSize=\"small\" sx={{\n            color: '#228be6'\n          }} /> : <MoreHorizOutlinedIcon className=\"edit-icon\" fontSize=\"small\" />}\n            </IconButton>\n          </Box>\n          <StyledMenu MenuListProps={{\n        'aria-labelledby': 'long-button'\n      }} anchorEl={anchorEl} open={open} onClose={closeMenu}>\n            <MenuItem key={'star'} onClick={() => {\n          props.switchStarred();\n          closeMenu();\n        }} disableRipple>\n              {props.detail.starred ? <>\n                  <StarOutlineIcon fontSize=\"small\" />\n                  {t('unstar')}\n                </> : <>\n                  <StarIcon fontSize=\"small\" />\n                  {t('star')}\n                </>}\n            </MenuItem>\n\n            <MenuItem key={'edit'} onClick={() => {\n          props.editMe();\n          closeMenu();\n        }} disableRipple>\n              <EditIcon />\n              {t('edit')}\n            </MenuItem>\n\n            <Divider sx={{\n          my: 0.5\n        }} />\n\n            <ConfirmDeleteMenuItem onDelete={() => {\n          setAnchorEl(null);\n          closeMenu();\n          props.deleteMe();\n        }} />\n          </StyledMenu>\n        </>}\n    </Box>;\n}\ninterface CopilotFormProps {\n  copilotDetail: CopilotDetail;\n  close(): void;\n  save(copilotDetail: CopilotDetail): void;\n  // premiumActivated: boolean\n  // openPremiumPage(): void\n}\nfunction CopilotForm(props: CopilotFormProps) {\n  const {\n    t\n  } = useTranslation();\n  const theme = useTheme();\n  const isSmallScreen = useIsSmallScreen();\n  const [copilotEdit, setCopilotEdit] = useState<CopilotDetail>(props.copilotDetail);\n  useEffect(() => {\n    setCopilotEdit(props.copilotDetail);\n  }, [props.copilotDetail]);\n  const [helperTexts, setHelperTexts] = useState({\n    name: <></>,\n    prompt: <></>\n  });\n  const inputHandler = (field: keyof CopilotDetail) => {\n    return (event: React.ChangeEvent<HTMLInputElement>) => {\n      setHelperTexts({\n        name: <></>,\n        prompt: <></>\n      });\n      setCopilotEdit({\n        ...copilotEdit,\n        [field]: event.target.value\n      });\n    };\n  };\n  const save = () => {\n    copilotEdit.name = copilotEdit.name.trim();\n    copilotEdit.prompt = copilotEdit.prompt.trim();\n    if (copilotEdit.picUrl) {\n      copilotEdit.picUrl = copilotEdit.picUrl.trim();\n    }\n    if (copilotEdit.name.length === 0) {\n      setHelperTexts({\n        ...helperTexts,\n        name: <p style={{\n          color: 'red'\n        }}>{t('cannot be empty')}</p>\n      });\n      return;\n    }\n    if (copilotEdit.prompt.length === 0) {\n      setHelperTexts({\n        ...helperTexts,\n        prompt: <p style={{\n          color: 'red'\n        }}>{t('cannot be empty')}</p>\n      });\n      return;\n    }\n    props.save(copilotEdit);\n    trackingEvent('create_copilot', {\n      event_category: 'user'\n    });\n  };\n  return <Box sx={{\n    marginBottom: '20px',\n    backgroundColor: theme.palette.mode === 'dark' ? theme.palette.grey[700] : theme.palette.grey[50],\n    padding: '8px'\n  }}>\n      <TextField autoFocus={!isSmallScreen} margin=\"dense\" label={t('Copilot Name')} fullWidth variant=\"outlined\" placeholder={t('My Assistant') || ''} value={copilotEdit.name} onChange={inputHandler('name')} helperText={helperTexts.name} />\n      <TextField margin=\"dense\" label={t('Copilot Prompt')} placeholder={t('Copilot Prompt Demo') || ''} fullWidth variant=\"outlined\" multiline minRows={4} maxRows={10} value={copilotEdit.prompt} onChange={inputHandler('prompt')} helperText={helperTexts.prompt} />\n      <TextField margin=\"dense\" label={t('Copilot Avatar URL')} placeholder=\"http://xxxxx/xxx.png\" fullWidth variant=\"outlined\" value={copilotEdit.picUrl} onChange={inputHandler('picUrl')} />\n      <Box sx={{\n      display: 'flex',\n      justifyContent: 'space-between'\n    }}>\n        <FormGroup row>\n          <FormControlLabel control={<Switch />} label={t('Share with Chatbox')} checked={copilotEdit.shared} onChange={(_e, checked) => setCopilotEdit({\n          ...copilotEdit,\n          shared: checked\n        })} />\n        </FormGroup>\n        <ButtonGroup>\n          <Button variant=\"outlined\" onClick={() => props.close()}>\n            {t('cancel')}\n          </Button>\n          <Button variant=\"contained\" onClick={save}>\n            {t('save')}\n          </Button>\n        </ButtonGroup>\n      </Box>\n    </Box>;\n}\nexport async function getEmptyCopilot(): Promise<CopilotDetail> {\n  const conf = await platform.getConfig();\n  return {\n    id: `${conf.uuid}:${uuidv4()}`,\n    name: '',\n    picUrl: '',\n    prompt: '',\n    starred: false,\n    usedCount: 0,\n    shared: true\n  };\n}\nconst SplitComponent = function Copilots() {\n  const [open, setOpen] = useState(false);\n  const showCopilotsInNewSession = useUIStore(s => s.showCopilotsInNewSession);\n  const setShowCopilotsInNewSession = useUIStore(s => s.setShowCopilotsInNewSession);\n  const navigate = useNavigate();\n  const {\n    t\n  } = useTranslation();\n  const store = useMyCopilots();\n  const {\n    copilots: remoteCopilots\n  } = useRemoteCopilots();\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const selectCopilot = (detail: CopilotDetail) => {\n    const newDetail = {\n      ...detail,\n      usedCount: (detail.usedCount || 0) + 1\n    };\n    if (newDetail.shared) {\n      remote.recordCopilotShare(newDetail);\n    }\n    store.addOrUpdate(newDetail);\n    navigate({\n      to: '/',\n      search: {\n        copilotId: detail.id\n      }\n    });\n    handleClose();\n  };\n  const [copilotEdit, setCopilotEdit] = useState<CopilotDetail | null>(null);\n  useEffect(() => {\n    if (!open) {\n      setCopilotEdit(null);\n    } else {\n      trackingEvent('copilot_window', {\n        event_category: 'screen_view'\n      });\n    }\n  }, [open]);\n  const list = [...store.copilots.filter(item => item.starred).sort((a, b) => b.usedCount - a.usedCount), ...store.copilots.filter(item => !item.starred).sort((a, b) => b.usedCount - a.usedCount)];\n  return <Page title={t('My Copilots')}>\n      <div className=\"p-4 max-w-4xl mx-auto\">\n        {copilotEdit ? <CopilotForm copilotDetail={copilotEdit} close={() => {\n        setCopilotEdit(null);\n      }} save={detail => {\n        store.addOrUpdate(detail);\n        setCopilotEdit(null);\n      }} /> : <>\n            {/* Setting Section */}\n            <Box sx={{\n          mb: 3\n        }}>\n              <Text size=\"md\" fw={700} mb={2} c=\"chatbox-primary\">\n                {t('Settings')}\n              </Text>\n              <Box sx={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          }}>\n                <MantineSwitch checked={showCopilotsInNewSession} onChange={event => setShowCopilotsInNewSession(event.currentTarget.checked)} label={t('Show Copilots in New Session')} />\n              </Box>\n            </Box>\n\n            {/* My Copilots Section */}\n            <Box sx={{\n          mb: 4\n        }}>\n              <Text size=\"md\" fw={700} mb={2} c=\"chatbox-primary\">\n                {t('My Copilots')}\n              </Text>\n\n              <MantineButton variant=\"light\" color=\"blue\" leftSection={<ScalableIcon icon={IconPlus} size={20} />} mb={16} onClick={() => {\n            getEmptyCopilot().then(setCopilotEdit);\n          }}>\n                {t('Create New Copilot')}\n              </MantineButton>\n\n              <Box sx={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(220px, 1fr))',\n            gap: 1.5\n          }}>\n                {list.map((item, ix) => <MiniItem key={`${item.id}_${ix}`} mode=\"local\" detail={item} selectMe={() => selectCopilot(item)} switchStarred={() => {\n              store.addOrUpdate({\n                ...item,\n                starred: !item.starred\n              });\n            }} editMe={() => {\n              setCopilotEdit(item);\n            }} deleteMe={() => {\n              store.remove(item.id);\n            }} />)}\n              </Box>\n            </Box>\n\n            {/* Chatbox Featured Section */}\n            <Box>\n              <Text size=\"md\" fw={700} mb={2} c=\"chatbox-primary\">\n                {t('Chatbox Featured')}\n              </Text>\n\n              <Box sx={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(220px, 1fr))',\n            gap: 1.5\n          }}>\n                {remoteCopilots?.map((item, ix) => <MiniItem key={`${item.id}_${ix}`} mode=\"remote\" detail={item} selectMe={() => selectCopilot(item)} />)}\n              </Box>\n            </Box>\n          </>}\n      </div>\n    </Page>;\n};\nexport { SplitComponent as component };","import { useQuery } from '@tanstack/react-query'\nimport { useAtom } from 'jotai'\nimport { atomWithStorage } from 'jotai/utils'\nimport type { CopilotDetail } from 'src/shared/types'\nimport * as remote from '@/packages/remote'\nimport storage, { StorageKey } from '@/storage'\nimport { useLanguage } from '@/stores/settingsStore'\n\nconst myCopilotsAtom = atomWithStorage<CopilotDetail[]>(StorageKey.MyCopilots, [], storage)\n\nexport function useMyCopilots() {\n  const [copilots, setCopilots] = useAtom(myCopilotsAtom)\n\n  const addOrUpdate = (target: CopilotDetail) => {\n    setCopilots((copilots) => {\n      let found = false\n      const newCopilots = copilots.map((c) => {\n        if (c.id === target.id) {\n          found = true\n          return target\n        }\n        return c\n      })\n      if (!found) {\n        newCopilots.push(target)\n      }\n      return newCopilots\n    })\n  }\n\n  const remove = (id: string) => {\n    setCopilots((copilots) => copilots.filter((c) => c.id !== id))\n  }\n\n  return {\n    copilots,\n    addOrUpdate,\n    remove,\n  }\n}\n\nexport function useRemoteCopilots() {\n  const language = useLanguage()\n  const { data: copilots, ...others } = useQuery({\n    queryKey: ['remote-copilots', language],\n    queryFn: () => remote.listCopilots(language),\n    initialData: [],\n    initialDataUpdatedAt: 0,\n    staleTime: 3600 * 1000,\n  })\n  return { copilots, ...others }\n}\n"],"names":["ConfirmDeleteMenuItem","onDelete","label","color","icon","theme","t","confirmDelete","setConfirmDelete","useState","confirmStyleHash","error","palette","contrastText","backgroundColor","main","warning","MenuItem","disableRipple","onClick","sx","Check","fontSize","Delete","styled","props","language","Menu","dir","elevation","anchorOrigin","vertical","horizontal","transformOrigin","PopoverClasses","root","paper","mode","grey","borderRadius","marginTop","spacing","minWidth","boxShadow","padding","text","secondary","marginRight","primary","action","selectedOpacity","margin","width","background","MiniItem","anchorEl","setAnchorEl","open","Boolean","closeMenu","Box","display","flexDirection","alignItems","height","cursor","border","borderColor","transition","opacity","event","preventDefault","selectMe","Avatar","A","src","detail","picUrl","marginLeft","flex","overflow","Typography","variant","noWrap","fontWeight","name","IconButton","stopPropagation","currentTarget","starred","Star","MoreHorizOutlined","className","MenuListProps","onClose","switchStarred","StarOutline","editMe","Edit","Divider","my","deleteMe","CopilotForm","isSmallScreen","copilotEdit","setCopilotEdit","copilotDetail","useEffect","helperTexts","setHelperTexts","prompt","inputHandler","field","target","value","marginBottom","TextField","autoFocus","fullWidth","placeholder","onChange","helperText","multiline","minRows","maxRows","justifyContent","FormGroup","row","FormControlLabel","control","checked","shared","_e","ButtonGroup","close","trim","length","save","event_category","style","async","getEmptyCopilot","id","platform","getConfig","uuid","usedCount","SplitComponent","setOpen","showCopilotsInNewSession","s","setShowCopilotsInNewSession","navigate","useNavigate","store","copilots","remoteCopilots","selectCopilot","newDetail","remote","addOrUpdate","to","search","copilotId","list","filter","item","sort","a","b","Page","title","mb","Text","size","fw","c","gap","leftSection","ScalableIcon","IconPlus","then","gridTemplateColumns","map","ix","remove","myCopilotsAtom","MyCopilots","useMyCopilots","setCopilots","found","newCopilots","push","useRemoteCopilots","data","others","queryKey","queryFn","initialData","initialDataUpdatedAt","staleTime"],"sourceRoot":""}