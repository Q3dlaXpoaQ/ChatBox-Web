"use strict";(self.webpackChunkxyz_chatboxapp_ce=self.webpackChunkxyz_chatboxapp_ce||[]).push([[8760],{18760:(e,t,r)=>{r.r(t),r.d(t,{component:()=>H,getEmptyCopilot:()=>X});var o=r(74848),a=r(17826),l=r(2432),n=r(5055),i=r(28597),s=r(34862),d=r(9257),p=r(84887),c=r(3892),x=r(81385),m=r(14073),u=r(11641),h=r(18740),g=r(71543),b=r(44675),f=r(42471),j=r(65724),C=r(68864),k=r(36379),A=r(833),v=r(61224),y=r(42449),w=r(52166),S=r(96540),M=r(34195),z=r(62938),U=r(67034),D=r(94017),T=r(89314);function F({onDelete:e,label:t,color:r="error",icon:a}){const l=(0,b.A)(),{t:n}=(0,M.Bd)(),[i,s]=(0,S.useState)(!1),d={error:{color:l.palette.error.contrastText,backgroundColor:l.palette.error.main,"&:hover":{color:l.palette.error.contrastText,backgroundColor:l.palette.error.main}},warning:{color:l.palette.warning.contrastText,backgroundColor:l.palette.warning.main,"&:hover":{color:l.palette.warning.contrastText,backgroundColor:l.palette.warning.main}}};return i?(0,o.jsxs)(h.A,{disableRipple:!0,onClick:()=>{e(),s(!1)},sx:d[r],children:[(0,o.jsx)(D.A,{fontSize:"small"}),(0,o.jsx)("b",{children:n("Confirm?")})]}):(0,o.jsxs)(h.A,{disableRipple:!0,onClick:()=>{s(!0);(0,T.vs)("shift")&&(e(),s(!1))},sx:{error:{"&:hover":{backgroundColor:"rgba(255, 0, 0, 0.1)"}},warning:{"&:hover":{backgroundColor:"rgba(255, 165, 0, 0.1)"}}}[r],children:[a||(0,o.jsx)(U.A,{fontSize:"small"}),t||n("delete")]})}var R=r(31300),_=r(74791),P=r(19741),I=(r(60382),r(67577)),E=r(24279),N=r(25203);const O=(0,I.Ay)((e=>{const t=(0,N.ok)();return(0,o.jsx)(P.A,{dir:"ar"===t?"rtl":"ltr",elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PopoverClasses:{root:"",paper:""},...e})}))((({theme:e})=>({"& .MuiPaper-root":{backgroundColor:"dark"===e.palette.mode?e.palette.grey[800]:e.palette.grey[100],borderRadius:6,marginTop:e.spacing(1),minWidth:140,color:"light"===e.palette.mode?"rgb(55, 65, 81)":e.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"0px 0"},"& .MuiMenuItem-root":{padding:"8px","& .MuiSvgIcon-root":{color:e.palette.text.secondary,marginRight:e.spacing(1.5)},"&:active":{backgroundColor:(0,E.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},"& hr":{margin:"2px 0"}},"& .MuiPaper-root::-webkit-scrollbar":{width:"6px"},"& .MuiPaper-root::-webkit-scrollbar-track":{background:"transparent"},"& .MuiPaper-root::-webkit-scrollbar-thumb":{backgroundColor:"light"===e.palette.mode?"#0000001a":"#ffffff1a",borderRadius:"4px"},"& .MuiPaper-root::-webkit-scrollbar-thumb:hover":{backgroundColor:"light"===e.palette.mode?"#0000003a":"#ffffff3a"}})));var $=r(93351),B=r(8097),W=r(83250),L=r(23342),q=r(36920),G=r(42446);function Z(e){const{t}=(0,M.Bd)(),[r,a]=S.useState(null),l=Boolean(r),n=()=>{a(null)};return(0,o.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 16px",height:"49px",cursor:"pointer",borderRadius:"8px",border:"1px solid",borderColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.1)":"#dee2e6",backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.03)":"#fff",transition:"all 0.2s",".edit-icon":{opacity:0},"&:hover":{borderColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.2)":"#adb5bd",backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.05)":"#f8f9fa"},"&:hover .edit-icon":{opacity:1}},onClick:t=>{t.preventDefault(),l||e.selectMe()},children:[(0,o.jsx)(x.A,{sx:{width:"28px",height:"28px",backgroundColor:e=>"dark"===e.palette.mode?"rgba(255, 255, 255, 0.1)":"#e9ecef"},src:e.detail.picUrl}),(0,o.jsx)(c.A,{sx:{marginLeft:"12px",flex:1,overflow:"hidden"},children:(0,o.jsx)(m.A,{variant:"body1",noWrap:!0,sx:{fontSize:"14px",fontWeight:400,color:e=>"dark"===e.palette.mode?"#fff":"#212529"},children:e.detail.name})}),"local"===e.mode&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.A,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:(0,o.jsx)(u.A,{onClick:e=>{e.stopPropagation(),e.preventDefault(),a(e.currentTarget)},sx:{padding:"4px",color:e=>"dark"===e.palette.mode?"#fff":"#495057"},children:e.detail.starred?(0,o.jsx)(d.A,{fontSize:"small",sx:{color:"#228be6"}}):(0,o.jsx)(s.A,{className:"edit-icon",fontSize:"small"})})}),(0,o.jsxs)(O,{MenuListProps:{"aria-labelledby":"long-button"},anchorEl:r,open:l,onClose:n,children:[(0,o.jsx)(h.A,{onClick:()=>{e.switchStarred(),n()},disableRipple:!0,children:e.detail.starred?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.A,{fontSize:"small"}),t("unstar")]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.A,{fontSize:"small"}),t("star")]})},"star"),(0,o.jsxs)(h.A,{onClick:()=>{e.editMe(),n()},disableRipple:!0,children:[(0,o.jsx)(i.A,{}),t("edit")]},"edit"),(0,o.jsx)(g.A,{sx:{my:.5}}),(0,o.jsx)(F,{onDelete:()=>{a(null),n(),e.deleteMe()}})]})]})]})}function K(e){const{t}=(0,M.Bd)(),r=(0,b.A)(),a=(0,B.L0)(),[l,n]=(0,S.useState)(e.copilotDetail);(0,S.useEffect)((()=>{n(e.copilotDetail)}),[e.copilotDetail]);const[i,s]=(0,S.useState)({name:(0,o.jsx)(o.Fragment,{}),prompt:(0,o.jsx)(o.Fragment,{})}),d=e=>t=>{s({name:(0,o.jsx)(o.Fragment,{}),prompt:(0,o.jsx)(o.Fragment,{})}),n({...l,[e]:t.target.value})};return(0,o.jsxs)(c.A,{sx:{marginBottom:"20px",backgroundColor:"dark"===r.palette.mode?r.palette.grey[700]:r.palette.grey[50],padding:"8px"},children:[(0,o.jsx)(f.A,{autoFocus:!a,margin:"dense",label:t("Copilot Name"),fullWidth:!0,variant:"outlined",placeholder:t("My Assistant")||"",value:l.name,onChange:d("name"),helperText:i.name}),(0,o.jsx)(f.A,{margin:"dense",label:t("Copilot Prompt"),placeholder:t("Copilot Prompt Demo")||"",fullWidth:!0,variant:"outlined",multiline:!0,minRows:4,maxRows:10,value:l.prompt,onChange:d("prompt"),helperText:i.prompt}),(0,o.jsx)(f.A,{margin:"dense",label:t("Copilot Avatar URL"),placeholder:"http://xxxxx/xxx.png",fullWidth:!0,variant:"outlined",value:l.picUrl,onChange:d("picUrl")}),(0,o.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(j.A,{row:!0,children:(0,o.jsx)(C.A,{control:(0,o.jsx)(k.A,{}),label:t("Share with Chatbox"),checked:l.shared,onChange:(e,t)=>n({...l,shared:t})})}),(0,o.jsxs)(A.A,{children:[(0,o.jsx)(v.A,{variant:"outlined",onClick:()=>e.close(),children:t("cancel")}),(0,o.jsx)(v.A,{variant:"contained",onClick:()=>{l.name=l.name.trim(),l.prompt=l.prompt.trim(),l.picUrl&&(l.picUrl=l.picUrl.trim()),0!==l.name.length?0!==l.prompt.length?(e.save(l),(0,W.i)("create_copilot",{event_category:"user"})):s({...i,prompt:(0,o.jsx)("p",{style:{color:"red"},children:t("cannot be empty")})}):s({...i,name:(0,o.jsx)("p",{style:{color:"red"},children:t("cannot be empty")})})},children:t("save")})]})]})]})}async function X(){return{id:`${(await q.A.getConfig()).uuid}:${(0,z.A)()}`,name:"",picUrl:"",prompt:"",starred:!1,usedCount:0,shared:!0}}const H=function(){const[e,t]=(0,S.useState)(!1),r=(0,G.j)((e=>e.showCopilotsInNewSession)),i=(0,G.j)((e=>e.setShowCopilotsInNewSession)),s=(0,w.Z)(),{t:d}=(0,M.Bd)(),p=(0,$.v)(),{copilots:x}=(0,$.x)(),m=e=>{const r={...e,usedCount:(e.usedCount||0)+1};r.shared&&L.lt(r),p.addOrUpdate(r),s({to:"/",search:{copilotId:e.id}}),t(!1)},[u,h]=(0,S.useState)(null);(0,S.useEffect)((()=>{e?(0,W.i)("copilot_window",{event_category:"screen_view"}):h(null)}),[e]);const g=[...p.copilots.filter((e=>e.starred)).sort(((e,t)=>t.usedCount-e.usedCount)),...p.copilots.filter((e=>!e.starred)).sort(((e,t)=>t.usedCount-e.usedCount))];return(0,o.jsx)(R.A,{title:d("My Copilots"),children:(0,o.jsx)("div",{className:"p-4 max-w-4xl mx-auto",children:u?(0,o.jsx)(K,{copilotDetail:u,close:()=>{h(null)},save:e=>{p.addOrUpdate(e),h(null)}}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(c.A,{sx:{mb:3},children:[(0,o.jsx)(a.E,{size:"md",fw:700,mb:2,c:"chatbox-primary",children:d("Settings")}),(0,o.jsx)(c.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,o.jsx)(l.d,{checked:r,onChange:e=>i(e.currentTarget.checked),label:d("Show Copilots in New Session")})})]}),(0,o.jsxs)(c.A,{sx:{mb:4},children:[(0,o.jsx)(a.E,{size:"md",fw:700,mb:2,c:"chatbox-primary",children:d("My Copilots")}),(0,o.jsx)(n.$,{variant:"light",color:"blue",leftSection:(0,o.jsx)(_.n,{icon:y.A,size:20}),mb:16,onClick:()=>{X().then(h)},children:d("Create New Copilot")}),(0,o.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:1.5},children:g.map(((e,t)=>(0,o.jsx)(Z,{mode:"local",detail:e,selectMe:()=>m(e),switchStarred:()=>{p.addOrUpdate({...e,starred:!e.starred})},editMe:()=>{h(e)},deleteMe:()=>{p.remove(e.id)}},`${e.id}_${t}`)))})]}),(0,o.jsxs)(c.A,{children:[(0,o.jsx)(a.E,{size:"md",fw:700,mb:2,c:"chatbox-primary",children:d("Chatbox Featured")}),(0,o.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:1.5},children:x?.map(((e,t)=>(0,o.jsx)(Z,{mode:"remote",detail:e,selectMe:()=>m(e)},`${e.id}_${t}`)))})]})]})})})}},93351:(e,t,r)=>{r.d(t,{v:()=>p,x:()=>c});var o=r(97286),a=r(34843),l=r(84929),n=r(23342),i=r(12268),s=r(25203);const d=(0,l.tG)(i.Z.MyCopilots,[],i.A);function p(){const[e,t]=(0,a.fp)(d);return{copilots:e,addOrUpdate:e=>{t((t=>{let r=!1;const o=t.map((t=>t.id===e.id?(r=!0,e):t));return r||o.push(e),o}))},remove:e=>{t((t=>t.filter((t=>t.id!==e))))}}}function c(){const e=(0,s.ok)(),{data:t,...r}=(0,o.I)({queryKey:["remote-copilots",e],queryFn:()=>n.Gg(e),initialData:[],initialDataUpdatedAt:0,staleTime:36e5});return{copilots:t,...r}}}}]);
//# sourceMappingURL=8760.b715740c035923e2a9b5.js.map