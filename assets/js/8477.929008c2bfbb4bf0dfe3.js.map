{"version":3,"file":"assets/js/8477.929008c2bfbb4bf0dfe3.js","mappings":"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","sources":["webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconHistory.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconDeviceFloppy.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconClearAll.mjs","webpack://xyz.chatboxapp.ce/./src/renderer/components/icons/Broom.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/icons/LayoutExpand.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/icons/LayoutShrink.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/UpdateAvailableButton.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/Toolbar.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/Header.tsx","webpack://xyz.chatboxapp.ce/./node_modules/@mantine/hooks/esm/use-throttled-callback/use-throttled-callback.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconArrowBarToUp.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconAlignRight.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconListTree.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconSwitch3.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconMessagePlus.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconChevronsUp.mjs","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconChevronsDown.mjs","webpack://xyz.chatboxapp.ce/./src/renderer/components/MessageNavigation.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/components/MessageList.tsx","webpack://xyz.chatboxapp.ce/./node_modules/@tabler/icons-react/dist/esm/icons/IconSwitch.mjs","webpack://xyz.chatboxapp.ce/./src/renderer/components/ThreadHistoryDrawer.tsx","webpack://xyz.chatboxapp.ce/./src/renderer/routes/session/$sessionId.tsx?07ab"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconHistory = createReactComponent(\"outline\", \"history\", \"IconHistory\", [[\"path\", { \"d\": \"M12 8l0 4l2 2\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5\", \"key\": \"svg-1\" }]]);\n\nexport { IconHistory as default };\n//# sourceMappingURL=IconHistory.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconDeviceFloppy = createReactComponent(\"outline\", \"device-floppy\", \"IconDeviceFloppy\", [[\"path\", { \"d\": \"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M14 4l0 4l-6 0l0 -4\", \"key\": \"svg-2\" }]]);\n\nexport { IconDeviceFloppy as default };\n//# sourceMappingURL=IconDeviceFloppy.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconClearAll = createReactComponent(\"outline\", \"clear-all\", \"IconClearAll\", [[\"path\", { \"d\": \"M8 6h12\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M6 12h12\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M4 18h12\", \"key\": \"svg-2\" }]]);\n\nexport { IconClearAll as default };\n//# sourceMappingURL=IconClearAll.mjs.map\n","import type { IconProps } from '@tabler/icons-react';\n\nexport default function Broom(props: IconProps) {\n  const { size, stroke, title, ...others } = props;\n\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox='0 0 24 24'\n      fill='none'\n      xmlns='http://www.w3.org/2000/svg'\n      aria-label={title}\n      {...others}\n    >\n      <path\n        d='M7.70645 13.5434C8.64996 10.9436 10.9734 9 13.7391 9V9C16.2165 9 18.3751 10.7902 18.4797 13.2653C18.5126 14.0442 18.5096 14.8236 18.4403 15.5C18.1575 18.2585 17.4848 19.828 17.0944 20.5366C16.9293 20.8364 16.5944 20.9749 16.2545 20.9335L6.09365 19.6943C5.35876 19.6047 4.96691 18.7727 5.3513 18.14C6.00064 17.0711 6.86657 15.5722 7.37006 14.4C7.48471 14.1331 7.59731 13.8441 7.70645 13.5434Z'\n        stroke='currentColor'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <path\n        d='M18 13.5L9 12.5'\n        stroke='currentColor'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <path\n        d='M8.5 20C8.5 20 10.2 17.7222 11 15.5'\n        stroke='currentColor'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <path\n        d='M12.5 20.5C12.5 20.5 14 18.5 14.5 16'\n        stroke='currentColor'\n        strokeWidth='2'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <path\n        d='M14.5 8.5L16 3.5'\n        stroke='currentColor'\n        strokeWidth='3'\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n    </svg>\n  );\n}\n","import type { IconProps } from '@tabler/icons-react';\n\nexport default function LayoutExpand(props: IconProps) {\n  const { size, stroke = 2, title, ...others } = props;\n\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox='0 0 24 24'\n      fill='none'\n      xmlns='http://www.w3.org/2000/svg'\n      aria-label={title}\n      {...others}\n    >\n      <rect\n        x='7.5'\n        y='5'\n        width='9'\n        height='14'\n        fill='currentColor'\n        stroke='currentColor'\n        strokeWidth={stroke}\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <rect\n        x='3'\n        y='5'\n        width='18'\n        height='14'\n        rx='2'\n        stroke='currentColor'\n        strokeWidth={stroke}\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n    </svg>\n  );\n}\n","import type { IconProps } from '@tabler/icons-react';\n\nexport default function LayoutShrink(props: IconProps) {\n  const { size, stroke = 2, title, ...others } = props;\n\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox='0 0 24 24'\n      fill='none'\n      xmlns='http://www.w3.org/2000/svg'\n      aria-label={title}\n      {...others}\n    >\n      <rect\n        x='9.5'\n        y='5'\n        width='5'\n        height='14'\n        fill='currentColor'\n        stroke='currentColor'\n        strokeWidth={stroke}\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n      <rect\n        x='3'\n        y='5'\n        width='18'\n        height='14'\n        rx='2'\n        stroke='currentColor'\n        strokeWidth={stroke}\n        strokeLinecap='round'\n        strokeLinejoin='round'\n      />\n    </svg>\n  );\n}\n","import { Button } from '@mantine/core'\nimport { IconRefresh } from '@tabler/icons-react'\nimport { useTranslation } from 'react-i18next'\nimport platform from '@/platform'\nimport { ScalableIcon } from './ScalableIcon'\n\nconst UpdateAvailableButton = () => {\n  const { t } = useTranslation()\n\n  const handleUpdateInstall = () => {\n    platform.installUpdate()\n  }\n\n  return (\n    <Button\n      h={28}\n      px=\"xs\"\n      bd={0}\n      radius={14}\n      variant=\"light\"\n      color=\"chatbox-warning\"\n      leftSection={<ScalableIcon icon={IconRefresh} />}\n      onClick={handleUpdateInstall}\n    >\n      {t('Update Available')}\n    </Button>\n  )\n}\n\nexport default UpdateAvailableButton\n","import NiceModal from '@ebay/nice-modal-react'\nimport { ActionIcon, Button, Flex } from '@mantine/core'\nimport {\n  IconClearAll,\n  IconCode,\n  IconDeviceFloppy,\n  IconDots,\n  IconHistory,\n  IconSearch,\n  IconTrash,\n} from '@tabler/icons-react'\nimport { useSetAtom } from 'jotai'\nimport { useCallback, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { useIsLargeScreen, useIsSmallScreen } from '@/hooks/useScreenChange'\nimport platform from '@/platform'\nimport { router } from '@/router'\nimport { deleteSession, getSession } from '@/stores/chatStore'\nimport { clear as clearSession } from '@/stores/sessionActions'\nimport { useUIStore } from '@/stores/uiStore'\nimport * as atoms from '../stores/atoms'\nimport ActionMenu from './ActionMenu'\nimport Broom from './icons/Broom'\nimport LayoutExpand from './icons/LayoutExpand'\nimport LayoutShrink from './icons/LayoutShrink'\nimport { ScalableIcon } from './ScalableIcon'\nimport UpdateAvailableButton from './UpdateAvailableButton'\n\n/**\n * 顶部标题工具栏（右侧）\n * @returns\n */\nexport default function Toolbar({ sessionId }: { sessionId: string }) {\n  const { t } = useTranslation()\n  const isSmallScreen = useIsSmallScreen()\n  const isLargeScreen = useIsLargeScreen()\n\n  const [showUpdateNotification, setShowUpdateNotification] = useState(false)\n  const setOpenSearchDialog = useUIStore((s) => s.setOpenSearchDialog)\n  const setThreadHistoryDrawerOpen = useSetAtom(atoms.showThreadHistoryDrawerAtom)\n  const widthFull = useUIStore((s) => s.widthFull)\n  const setWidthFull = useUIStore((s) => s.setWidthFull)\n\n  useEffect(() => {\n    const offUpdateDownloaded = platform.onUpdateDownloaded(() => {\n      setShowUpdateNotification(true)\n    })\n    return () => {\n      offUpdateDownloaded()\n    }\n  }, [])\n\n  const handleExportAndSave = () => {\n    NiceModal.show('export-chat')\n  }\n  const handleSessionClean = () => {\n    void clearSession(sessionId)\n  }\n  const handleSessionDelete = async () => {\n    try {\n      await deleteSession(sessionId)\n      router.navigate({ to: '/', replace: true })\n    } catch (error) {\n      console.error('Failed to delete session:', error)\n    }\n  }\n\n  const handleViewSessionJson = useCallback(async () => {\n    const session = await getSession(sessionId)\n    if (session) {\n      await NiceModal.show('json-viewer', { title: t('Session Raw JSON'), data: session })\n    }\n  }, [sessionId, t])\n\n  return !isSmallScreen ? (\n    <Flex align=\"center\" gap=\"md\" className=\"controls\">\n      {showUpdateNotification && <UpdateAvailableButton />}\n\n      {!isSmallScreen ? (\n        <Button\n          h={28}\n          px=\"xs\"\n          radius=\"sm\"\n          variant=\"outline\"\n          color=\"chatbox-tertiary\"\n          leftSection={<ScalableIcon icon={IconSearch} size={16} strokeWidth={1.8} />}\n          className=\"border-chatbox-border-primary\"\n          onClick={() => setOpenSearchDialog(true)}\n        >\n          {t('Search')}...\n        </Button>\n      ) : (\n        <ActionIcon variant=\"subtle\" size={28} color=\"chatbox-secondary\" onClick={() => setOpenSearchDialog(true)}>\n          <IconSearch strokeWidth={1.8} />\n        </ActionIcon>\n      )}\n\n      {isLargeScreen && (\n        <ActionIcon variant=\"subtle\" size={28} color=\"chatbox-secondary\" onClick={() => setWidthFull(!widthFull)}>\n          {widthFull ? <LayoutExpand strokeWidth={1.8} /> : <LayoutShrink strokeWidth={1.8} />}\n        </ActionIcon>\n      )}\n\n      <ActionIcon variant=\"subtle\" size={28} color=\"chatbox-secondary\" onClick={() => setThreadHistoryDrawerOpen(true)}>\n        <IconHistory strokeWidth={1.8} />\n      </ActionIcon>\n\n      <ActionMenu\n        position=\"bottom-end\"\n        items={[\n          {\n            text: t('Export Chat'),\n            icon: IconDeviceFloppy,\n            onClick: handleExportAndSave,\n          },\n          ...(process.env.NODE_ENV === 'development'\n            ? [\n                {\n                  text: t('View Session JSON'),\n                  icon: IconCode,\n                  onClick: handleViewSessionJson,\n                },\n              ]\n            : []),\n          {\n            divider: true,\n          },\n          {\n            doubleCheck: {\n              color: 'chatbox-error',\n            },\n            text: t('Clear All Messages'),\n            icon: Broom,\n            color: 'chatbox-primary',\n            onClick: handleSessionClean,\n          },\n          {\n            doubleCheck: {\n              color: 'chatbox-error',\n            },\n            text: t('Delete Current Session'),\n            icon: IconTrash,\n            color: 'chatbox-primary',\n            onClick: handleSessionDelete,\n          },\n        ]}\n      >\n        <ActionIcon variant=\"subtle\" size={28} color=\"chatbox-secondary\">\n          <IconDots strokeWidth={1.8} />\n        </ActionIcon>\n      </ActionMenu>\n    </Flex>\n  ) : (\n    <Flex align=\"center\" gap=\"xs\">\n      <ActionIcon variant=\"subtle\" size={24} color=\"chatbox-secondary\" onClick={() => setOpenSearchDialog(true)}>\n        <IconSearch strokeWidth={1.8} />\n      </ActionIcon>\n      <ActionMenu\n        position=\"bottom-end\"\n        items={[\n          {\n            text: t('Thread History'),\n            icon: IconHistory,\n            onClick: () => setThreadHistoryDrawerOpen(true),\n          },\n\n          {\n            text: t('Export Chat'),\n            icon: IconDeviceFloppy,\n            onClick: handleExportAndSave,\n          },\n          ...(process.env.NODE_ENV === 'development'\n            ? [\n                {\n                  text: t('View Session JSON'),\n                  icon: IconCode,\n                  onClick: handleViewSessionJson,\n                },\n              ]\n            : []),\n          {\n            divider: true,\n          },\n          {\n            doubleCheck: {\n              color: 'chatbox-error',\n            },\n            text: t('Clear All Messages'),\n            icon: IconClearAll,\n            color: 'chatbox-primary',\n            onClick: handleSessionClean,\n          },\n          {\n            doubleCheck: {\n              color: 'chatbox-error',\n            },\n            text: t('Delete Current Session'),\n            icon: IconTrash,\n            color: 'chatbox-primary',\n            onClick: handleSessionDelete,\n          },\n        ]}\n      >\n        <ActionIcon variant=\"subtle\" size={24} color=\"chatbox-secondary\">\n          <IconDots strokeWidth={1.8} />\n        </ActionIcon>\n      </ActionMenu>\n    </Flex>\n  )\n}\n","import NiceModal from '@ebay/nice-modal-react'\nimport { ActionIcon, Flex, Title, Tooltip } from '@mantine/core'\nimport { IconLayoutSidebarLeftExpand, IconMenu2, IconPencil } from '@tabler/icons-react'\nimport clsx from 'clsx'\nimport { useEffect } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { scheduleGenerateNameAndThreadName, scheduleGenerateThreadName } from '@/stores/sessionActions'\nimport { useUIStore } from '@/stores/uiStore'\nimport type { Session } from '../../shared/types'\nimport useNeedRoomForWinControls from '../hooks/useNeedRoomForWinControls'\nimport { useIsSmallScreen } from '../hooks/useScreenChange'\nimport * as settingActions from '../stores/settingActions'\nimport { ScalableIcon } from './ScalableIcon'\nimport Toolbar from './Toolbar'\nimport WindowControls from './WindowControls'\n\nexport default function Header(props: { session: Session }) {\n  const { t } = useTranslation()\n  const showSidebar = useUIStore((s) => s.showSidebar)\n  const setShowSidebar = useUIStore((s) => s.setShowSidebar)\n\n  const isSmallScreen = useIsSmallScreen()\n  const { needRoomForMacWindowControls } = useNeedRoomForWinControls()\n\n  const { session: currentSession } = props\n\n  // 会话名称自动生成\n  useEffect(() => {\n    const autoGenerateTitle = settingActions.getAutoGenerateTitle()\n    if (!autoGenerateTitle) {\n      return\n    }\n\n    // 检查是否有正在生成的消息\n    const hasGeneratingMessage = currentSession.messages.some((msg) => msg.generating)\n\n    // 如果有消息正在生成，或者消息数量少于2条，不触发名称生成\n    if (hasGeneratingMessage || currentSession.messages.length < 2) {\n      return\n    }\n\n    // 触发名称生成（在 sessionActions 中进行去重和延迟处理）\n    if (currentSession.name === 'Untitled') {\n      scheduleGenerateNameAndThreadName(currentSession.id)\n    } else if (!currentSession.threadName) {\n      scheduleGenerateThreadName(currentSession.id)\n    }\n  }, [currentSession])\n\n  const editCurrentSession = () => {\n    if (!currentSession) {\n      return\n    }\n    NiceModal.show('session-settings', { session: currentSession })\n  }\n\n  return (\n    <Flex\n      h={54}\n      align=\"center\"\n      px=\"sm\"\n      className={clsx('flex-none title-bar border-0 border-b border-solid border-chatbox-border-primary')}\n    >\n      {(!showSidebar || isSmallScreen) && (\n        <Flex align=\"center\" className={needRoomForMacWindowControls ? 'pl-20' : ''}>\n          <ActionIcon\n            className=\"controls\"\n            variant=\"subtle\"\n            size={isSmallScreen ? 24 : 20}\n            color={isSmallScreen ? 'chatbox-secondary' : 'chatbox-tertiary'}\n            mr=\"sm\"\n            onClick={() => setShowSidebar(!showSidebar)}\n          >\n            {isSmallScreen ? <IconMenu2 /> : <IconLayoutSidebarLeftExpand />}\n          </ActionIcon>\n        </Flex>\n      )}\n\n      <Flex align=\"center\" gap={'xxs'} flex={1} {...(isSmallScreen ? { justify: 'center', pl: 28, pr: 8 } : {})}>\n        <Title order={4} fz={!isSmallScreen ? 20 : undefined} lineClamp={1}>\n          {currentSession?.name}\n        </Title>\n\n        <Tooltip label={t('Customize settings for the current conversation')}>\n          <ActionIcon\n            className=\"controls\"\n            variant=\"subtle\"\n            color=\"chatbox-tertiary\"\n            size={20}\n            onClick={() => {\n              editCurrentSession()\n            }}\n          >\n            <ScalableIcon icon={IconPencil} size={20} />\n          </ActionIcon>\n        </Tooltip>\n      </Flex>\n\n      <Toolbar sessionId={currentSession.id} />\n\n      <WindowControls className=\"-mr-3 ml-2\" />\n    </Flex>\n  )\n}\n","'use client';\nimport { useRef, useCallback, useEffect } from 'react';\nimport { useCallbackRef } from '../use-callback-ref/use-callback-ref.mjs';\n\nfunction useThrottledCallbackWithClearTimeout(callback, wait) {\n  const handleCallback = useCallbackRef(callback);\n  const latestInArgsRef = useRef(null);\n  const latestOutArgsRef = useRef(null);\n  const active = useRef(true);\n  const waitRef = useRef(wait);\n  const timeoutRef = useRef(-1);\n  const clearTimeout = () => window.clearTimeout(timeoutRef.current);\n  const callThrottledCallback = useCallback(\n    (...args) => {\n      handleCallback(...args);\n      latestInArgsRef.current = args;\n      latestOutArgsRef.current = args;\n      active.current = false;\n    },\n    [handleCallback]\n  );\n  const timerCallback = useCallback(() => {\n    if (latestInArgsRef.current && latestInArgsRef.current !== latestOutArgsRef.current) {\n      callThrottledCallback(...latestInArgsRef.current);\n      timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n    } else {\n      active.current = true;\n    }\n  }, [callThrottledCallback]);\n  const throttled = useCallback(\n    (...args) => {\n      if (active.current) {\n        callThrottledCallback(...args);\n        timeoutRef.current = window.setTimeout(timerCallback, waitRef.current);\n      } else {\n        latestInArgsRef.current = args;\n      }\n    },\n    [callThrottledCallback, timerCallback]\n  );\n  useEffect(() => {\n    waitRef.current = wait;\n  }, [wait]);\n  return [throttled, clearTimeout];\n}\nfunction useThrottledCallback(callback, wait) {\n  return useThrottledCallbackWithClearTimeout(callback, wait)[0];\n}\n\nexport { useThrottledCallback, useThrottledCallbackWithClearTimeout };\n//# sourceMappingURL=use-throttled-callback.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconArrowBarToUp = createReactComponent(\"outline\", \"arrow-bar-to-up\", \"IconArrowBarToUp\", [[\"path\", { \"d\": \"M12 10l0 10\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M12 10l4 4\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M12 10l-4 4\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M4 4l16 0\", \"key\": \"svg-3\" }]]);\n\nexport { IconArrowBarToUp as default };\n//# sourceMappingURL=IconArrowBarToUp.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconAlignRight = createReactComponent(\"outline\", \"align-right\", \"IconAlignRight\", [[\"path\", { \"d\": \"M4 6l16 0\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M10 12l10 0\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M6 18l14 0\", \"key\": \"svg-2\" }]]);\n\nexport { IconAlignRight as default };\n//# sourceMappingURL=IconAlignRight.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconListTree = createReactComponent(\"outline\", \"list-tree\", \"IconListTree\", [[\"path\", { \"d\": \"M9 6h11\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M12 12h8\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M15 18h5\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M5 6v.01\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M8 12v.01\", \"key\": \"svg-4\" }], [\"path\", { \"d\": \"M11 18v.01\", \"key\": \"svg-5\" }]]);\n\nexport { IconListTree as default };\n//# sourceMappingURL=IconListTree.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconSwitch3 = createReactComponent(\"outline\", \"switch-3\", \"IconSwitch3\", [[\"path\", { \"d\": \"M3 17h2.397a5 5 0 0 0 4.096 -2.133l.177 -.253m3.66 -5.227l.177 -.254a5 5 0 0 1 4.096 -2.133h3.397\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M18 4l3 3l-3 3\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M3 7h2.397a5 5 0 0 1 4.096 2.133l4.014 5.734a5 5 0 0 0 4.096 2.133h3.397\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M18 20l3 -3l-3 -3\", \"key\": \"svg-3\" }]]);\n\nexport { IconSwitch3 as default };\n//# sourceMappingURL=IconSwitch3.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconMessagePlus = createReactComponent(\"outline\", \"message-plus\", \"IconMessagePlus\", [[\"path\", { \"d\": \"M8 9h8\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M8 13h6\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M16 19h6\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M19 16v6\", \"key\": \"svg-4\" }]]);\n\nexport { IconMessagePlus as default };\n//# sourceMappingURL=IconMessagePlus.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconChevronsUp = createReactComponent(\"outline\", \"chevrons-up\", \"IconChevronsUp\", [[\"path\", { \"d\": \"M7 11l5 -5l5 5\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M7 17l5 -5l5 5\", \"key\": \"svg-1\" }]]);\n\nexport { IconChevronsUp as default };\n//# sourceMappingURL=IconChevronsUp.mjs.map\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconChevronsDown = createReactComponent(\"outline\", \"chevrons-down\", \"IconChevronsDown\", [[\"path\", { \"d\": \"M7 7l5 5l5 -5\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M7 13l5 5l5 -5\", \"key\": \"svg-1\" }]]);\n\nexport { IconChevronsDown as default };\n//# sourceMappingURL=IconChevronsDown.mjs.map\n","import { Box, Button, Divider, Stack } from '@mantine/core'\nimport { IconArrowDown, IconChevronDown, IconChevronsDown, IconChevronsUp, IconChevronUp } from '@tabler/icons-react'\nimport { clsx } from 'clsx'\nimport { type CSSProperties, type FC, memo, useCallback, useRef } from 'react'\n\nexport type MessageNavigationProps = {\n  visible: boolean\n  onVisibleChange?: (visible: boolean) => void\n  onScrollToTop?: () => void\n  onScrollToBottom?: () => void\n  onScrollToPrev?: () => void\n  onScrollToNext?: () => void\n}\n\nexport const MessageNavigation: FC<MessageNavigationProps> = ({\n  visible,\n  onVisibleChange,\n  onScrollToTop,\n  onScrollToBottom,\n  onScrollToPrev,\n  onScrollToNext,\n}) => {\n  const timerRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n\n  const handleMouseEnter = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current)\n    }\n    onVisibleChange?.(true)\n  }, [onVisibleChange])\n\n  const handleMouseLeave = useCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current)\n    }\n\n    timerRef.current = setTimeout(() => {\n      timerRef.current = null\n      onVisibleChange?.(false)\n    }, 2000)\n  }, [onVisibleChange])\n\n  return (\n    <div\n      className={clsx(\n        'absolute right-0 py-6 pl-2 bottom-0 transition-all',\n        visible ? '-translate-x-3 opacity-100' : 'translate-x-1/2 opacity-0'\n      )}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      <Stack\n        gap={6}\n        p={'xxs'}\n        className=\"rounded border border-solid border-chatbox-border-primary bg-chatbox-background-primary [&>.mantine-Divider-root]:border-chatbox-border-primary\"\n      >\n        <MessageNavigationButton icon={<IconChevronsUp />} onClick={onScrollToTop} />\n        <Divider />\n        <MessageNavigationButton icon={<IconChevronUp />} onClick={onScrollToPrev} />\n        <Divider />\n        <MessageNavigationButton icon={<IconChevronDown />} onClick={onScrollToNext} />\n        <Divider />\n        <MessageNavigationButton icon={<IconChevronsDown />} onClick={onScrollToBottom} />\n      </Stack>\n    </div>\n  )\n}\n\nexport default memo(MessageNavigation)\n\nconst MessageNavigationButton = ({ icon, ...others }: { icon: React.ReactElement; onClick?: () => void }) => {\n  const iconSize = 16\n  return (\n    <button\n      className={clsx(\n        'flex border-0 outline-none [-webkit-tap-highlight-color:transparent] p-0 cursor-pointer text-chatbox-tint-tertiary active:translate-y-px',\n        'bg-transparent hover:text-chatbox-tint-secondary'\n      )}\n      {...others}\n    >\n      <Box component=\"span\" w={iconSize} h={iconSize} className=\"[&>svg]:w-full [&>svg]:h-full\">\n        {icon}\n      </Box>\n    </button>\n  )\n}\n\nexport const ScrollToBottomButton = ({ onClick, style }: { onClick?(): void; style?: CSSProperties }) => {\n  return (\n    <Box className=\"absolute bottom-5 right-2\">\n      <Button\n        w={38}\n        h={38}\n        radius={19}\n        p={0}\n        bg=\"var(--chatbox-background-primary)\"\n        c=\"chatbox-primary\"\n        className=\"shadow-xl border-chatbox-border-primary\"\n        onClick={onClick}\n        style={style}\n      >\n        <IconArrowDown size={20} />\n      </Button>\n    </Box>\n  )\n}\n","import NiceModal from '@ebay/nice-modal-react'\nimport { ActionIcon, Button, Flex, Stack, Text, Transition } from '@mantine/core'\nimport { useThrottledCallback } from '@mantine/hooks'\nimport {\n  IconAlignRight,\n  IconArrowBarToUp,\n  IconArrowUp,\n  IconChevronLeft,\n  IconChevronRight,\n  IconListTree,\n  IconMessagePlus,\n  IconPencil,\n  IconSwitch3,\n  IconTrash,\n} from '@tabler/icons-react'\nimport { useAtomValue, useSetAtom } from 'jotai'\nimport { throttle } from 'lodash'\nimport {\n  type FC,\n  forwardRef,\n  memo,\n  type UIEventHandler,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { type StateSnapshot, Virtuoso, type VirtuosoHandle } from 'react-virtuoso'\nimport type { Session, SessionThreadBrief } from 'src/shared/types'\nimport { platformTypeAtom } from '@/hooks/useNeedRoomForWinControls'\nimport { useIsSmallScreen } from '@/hooks/useScreenChange'\nimport { cn } from '@/lib/utils'\nimport * as atoms from '@/stores/atoms'\nimport {\n  deleteFork,\n  expandFork,\n  moveThreadToConversations,\n  removeThread,\n  switchFork,\n  switchThread,\n} from '@/stores/sessionActions'\nimport { getAllMessageList, getCurrentThreadHistoryHash } from '@/stores/sessionHelpers'\nimport { settingsStore } from '@/stores/settingsStore'\nimport { useUIStore } from '@/stores/uiStore'\nimport ActionMenu from './ActionMenu'\nimport { ErrorBoundary } from './ErrorBoundary'\nimport { BlockCodeCollapsedStateProvider } from './Markdown'\nimport Message from './Message'\nimport MessageNavigation, { ScrollToBottomButton } from './MessageNavigation'\nimport { ScalableIcon } from './ScalableIcon'\n\nconst sessionScrollPositionCache = new Map<string, StateSnapshot>()\n\nexport interface MessageListRef {\n  scrollToTop: (behavior?: ScrollBehavior) => void\n  scrollToBottom: (behavior?: ScrollBehavior) => void\n}\n\nexport interface MessageListProps {\n  className?: string\n  currentSession: Session\n}\n\nconst MessageList = forwardRef<MessageListRef, MessageListProps>((props, ref) => {\n  const { t } = useTranslation()\n  const isSmallScreen = useIsSmallScreen()\n  const widthFull = useUIStore((s) => s.widthFull)\n\n  const { currentSession } = props\n  const currentThreadHash = useMemo(\n    () => currentSession && getCurrentThreadHistoryHash(currentSession),\n    [currentSession]\n  )\n  const currentMessageList = useMemo(() => getAllMessageList(currentSession), [currentSession])\n\n  const virtuoso = useRef<VirtuosoHandle>(null)\n  const messageListRef = useRef<HTMLDivElement>(null)\n\n  const setMessageListElement = useUIStore((s) => s.setMessageListElement)\n  const setMessageScrolling = useUIStore((s) => s.setMessageScrolling)\n\n  // message navigation handlers\n  const [messageNavigationVisible, setMessageNavigationVisible] = useState(false)\n  const handleMessageNavigationVisibleChanged = useCallback((v: boolean) => setMessageNavigationVisible(v), [])\n\n  const handleScrollToTop = useCallback(() => {\n    virtuoso.current?.scrollToIndex({ index: 0, align: 'start', behavior: 'smooth' })\n  }, [])\n\n  const handleScrollToBottom = useCallback(() => {\n    virtuoso.current?.scrollTo({ top: Infinity, behavior: 'smooth' })\n  }, [])\n\n  const handleScrollToPrev = useCallback(() => {\n    if (messageListRef?.current && virtuoso?.current) {\n      const containerRect = messageListRef.current.getBoundingClientRect()\n      for (let i = 0; i < currentMessageList.length; i++) {\n        const msg = currentMessageList[i]\n        if (msg.role !== 'user' && msg.role !== 'assistant') {\n          continue\n        }\n        const msgElement = messageListRef.current.querySelector(\n          `[data-testid=\"virtuoso-item-list\"] > [data-index=\"${i}\"]`\n        )\n        if (msgElement) {\n          const rect = msgElement.getBoundingClientRect()\n          // 找到第一个出现在可视区域顶部的元素，滚动到上一条用户消息\n          if (rect.bottom > containerRect.top) {\n            for (let j = i - 1; j >= 0; j--) {\n              if (currentMessageList[j].role === 'user') {\n                virtuoso.current.scrollToIndex({\n                  index: j,\n                  align: 'start',\n                  offset: isSmallScreen ? -28 : 0,\n                  behavior: 'smooth',\n                })\n                return\n              }\n            }\n            // 没有上一条用户消息了，滚动到顶部\n            virtuoso.current.scrollToIndex({ index: 0, align: 'start', behavior: 'smooth' })\n            return\n          }\n        }\n      }\n    }\n  }, [currentMessageList, isSmallScreen])\n\n  const handleScrollToNext = useCallback(() => {\n    if (messageListRef?.current && virtuoso?.current) {\n      const containerRect = messageListRef.current.getBoundingClientRect()\n      for (let i = 0; i < currentMessageList.length; i++) {\n        const msg = currentMessageList[i]\n        if (msg.role !== 'user' && msg.role !== 'assistant') {\n          continue\n        }\n        const msgElement = messageListRef.current.querySelector(\n          `[data-testid=\"virtuoso-item-list\"] > [data-index=\"${i}\"]`\n        )\n        if (msgElement) {\n          const rect = msgElement.getBoundingClientRect()\n          // 找到第一个出现在可视区域顶部的元素，滚动到下一条用户消息\n          if (rect.bottom > containerRect.top) {\n            for (let j = i + 1; j < currentMessageList.length; j++) {\n              if (currentMessageList[j].role === 'user') {\n                virtuoso.current.scrollToIndex({ index: j, align: 'start', behavior: 'smooth' })\n                return\n              }\n            }\n            // 没有下一条用户消息了，滚动到底部\n            virtuoso.current.scrollToIndex({ index: currentMessageList.length - 1, align: 'end', behavior: 'smooth' })\n            return\n          }\n        }\n      }\n    }\n  }, [currentMessageList])\n\n  const [atBottom, setAtBottom] = useState(false)\n  const [atTop, setAtTop] = useState(false)\n\n  const [showScrollToPrev, setShowScrollToPrev] = useState(false)\n  const lastScrollTop = useRef<number>()\n  const timerRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  useEffect(() => {\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current)\n      }\n    }\n  }, [])\n\n  const handleScrollTopThrottled = useThrottledCallback((scrollTop?: number) => {\n    if (typeof scrollTop === 'number' && typeof lastScrollTop.current === 'number') {\n      if (scrollTop > 0 && scrollTop < lastScrollTop.current) {\n        // 是向上滚动\n        setShowScrollToPrev(true)\n        if (timerRef.current) {\n          clearTimeout(timerRef.current)\n          timerRef.current = null\n        }\n        timerRef.current = setTimeout(() => setShowScrollToPrev(false), 3000)\n      } else {\n        setShowScrollToPrev(false)\n        if (timerRef.current) {\n          clearTimeout(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }\n    lastScrollTop.current = scrollTop\n  }, 256)\n\n  const handleScroll = useCallback<UIEventHandler>(\n    (e) => {\n      const scrollTop = e.currentTarget.scrollTop\n      if (e.currentTarget.scrollHeight - (scrollTop + e.currentTarget.clientHeight) >= 0) {\n        handleScrollTopThrottled(scrollTop)\n      }\n    },\n    [handleScrollTopThrottled]\n  )\n  // message navigation handlers end\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: 仅执行一次\n  useEffect(() => {\n    setMessageScrolling(virtuoso)\n    const currentVirtuoso = virtuoso.current // 清理时 virtuoso.current 已经为 null\n    return () => {\n      currentVirtuoso?.getState((state) => {\n        if (state.ranges.length > 0) {\n          // useEffect 可能执行两次，这里根据 ranges 判断是否为第一次 useEffect 严格测试导致的执行\n          sessionScrollPositionCache.set(currentSession.id, state)\n        }\n      })\n    }\n  }, [])\n  // biome-ignore lint/correctness/useExhaustiveDependencies: 仅执行一次\n  useEffect(() => {\n    setMessageListElement(messageListRef)\n  }, [])\n\n  const platformType = useAtomValue(platformTypeAtom)\n\n  useImperativeHandle(ref, () => ({\n    scrollToTop: (behavior = 'auto') => virtuoso.current?.scrollTo({ top: 0, behavior }),\n    scrollToBottom: (behavior = 'auto') => virtuoso.current?.scrollTo({ top: Infinity, behavior }),\n  }))\n\n  return (\n    <div className={cn('w-full h-full mx-auto', props.className)}>\n      <BlockCodeCollapsedStateProvider defaultCollapsed={!!settingsStore.getState().autoCollapseCodeBlock}>\n        <div className=\"overflow-hidden h-full pr-0 pl-1 sm:pl-0 relative\" ref={messageListRef}>\n          <Virtuoso\n            style={{ scrollbarGutter: 'stable' }}\n            className={platformType === 'win32' ? 'scrollbar-custom' : ''}\n            data={currentMessageList}\n            ref={virtuoso}\n            followOutput=\"smooth\"\n            {...(sessionScrollPositionCache.has(currentSession.id)\n              ? {\n                  restoreStateFrom: sessionScrollPositionCache.get(currentSession.id),\n                  // 需要额外设置 initialScrollTop，否则恢复位置后 scrollTop 为 0。这时如果用户没有滚动，那么下次保存时 scrollTop 将记为 0，导致下一次恢复时位置始终为顶部。\n                  initialScrollTop: sessionScrollPositionCache.get(currentSession.id)?.scrollTop,\n                }\n              : {\n                  initialTopMostItemIndex: currentMessageList.length - 1,\n                })}\n            increaseViewportBy={{ top: 2000, bottom: 2000 }}\n            itemContent={(index, msg) => {\n              return (\n                <Stack\n                  key={msg.id}\n                  gap={0}\n                  className={widthFull ? 'w-full' : 'max-w-4xl mx-auto'}\n                  pt={msg.role === 'user' ? 4 : 0}\n                >\n                  {currentThreadHash[msg.id] && (\n                    <ThreadLabel thread={currentThreadHash[msg.id]} sessionId={currentSession.id} />\n                  )}\n                  <ErrorBoundary name={`message-item`}>\n                    <Message\n                      id={msg.id}\n                      msg={msg}\n                      sessionId={currentSession.id}\n                      sessionType={currentSession.type || 'chat'}\n                      className={index === 0 ? 'pt-4' : index === currentMessageList.length - 1 ? '!pb-4' : ''}\n                      collapseThreshold={msg.role === 'system' ? 150 : undefined}\n                      buttonGroup={\n                        index === currentMessageList.length - 1 && msg.role === 'assistant' ? 'always' : 'auto'\n                      }\n                      assistantAvatarKey={currentSession.assistantAvatarKey}\n                      sessionPicUrl={currentSession.picUrl}\n                    />\n                  </ErrorBoundary>\n                  {currentSession.messageForksHash?.[msg.id] &&\n                    currentSession.messageForksHash[msg.id].lists.length > 1 && (\n                      <Flex justify=\"flex-end\" mt={-16} pr=\"md\" mr=\"md\" className=\"z-10 self-end\">\n                        <ForkNav\n                          sessionId={currentSession.id}\n                          msgId={msg.id}\n                          forks={currentSession.messageForksHash[msg.id]}\n                        />\n                      </Flex>\n                    )}\n                </Stack>\n              )\n            }}\n            atTopStateChange={setAtTop}\n            atBottomStateChange={setAtBottom}\n            onScroll={handleScroll}\n          />\n\n          {!isSmallScreen ? (\n            <MessageNavigation\n              visible={messageNavigationVisible}\n              onVisibleChange={handleMessageNavigationVisibleChanged}\n              onScrollToTop={handleScrollToTop}\n              onScrollToBottom={handleScrollToBottom}\n              onScrollToPrev={handleScrollToPrev}\n              onScrollToNext={handleScrollToNext}\n            />\n          ) : (\n            <>\n              <Transition mounted={showScrollToPrev && !atTop} transition=\"fade-down\">\n                {(transitionStyle) => (\n                  <Flex\n                    style={transitionStyle}\n                    className=\"absolute z-10 top-0 left-0 right-0 leading-tight bg-chatbox-background-secondary\"\n                  >\n                    {[\n                      { text: t('Return to the top'), icon: IconArrowBarToUp, onClick: handleScrollToTop },\n                      {\n                        text: t('Back to previous message'),\n                        icon: IconArrowUp,\n                        onClick: handleScrollToPrev,\n                      },\n                    ].map((item, idx) => (\n                      <Button\n                        key={item.text}\n                        variant=\"transparent\"\n                        className={cn('w-1/2', idx === 0 ? 'border-r border-r-chatbox-border-primary' : '')}\n                        classNames={{\n                          section: '!mr-xxs',\n                        }}\n                        size=\"xs\"\n                        h=\"auto\"\n                        py={6}\n                        c=\"chatbox-tertiary\"\n                        onClick={item.onClick}\n                        leftSection={<ScalableIcon icon={item.icon} size={16} />}\n                      >\n                        {item.text}\n                      </Button>\n                    ))}\n                  </Flex>\n                )}\n              </Transition>\n              <Transition mounted={!atBottom} transition=\"slide-up\">\n                {(transitionStyle) => <ScrollToBottomButton onClick={handleScrollToBottom} style={transitionStyle} />}\n              </Transition>\n            </>\n          )}\n        </div>\n      </BlockCodeCollapsedStateProvider>\n    </div>\n  )\n})\n\nexport default memo(MessageList)\n\nfunction ForkNav(props: { sessionId: string; msgId: string; forks: NonNullable<Session['messageForksHash']>[string] }) {\n  const { sessionId, msgId, forks } = props\n  const [flash, setFlash] = useState(false)\n  const prevLength = useRef(forks.lists.length)\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    if (forks.lists.length > prevLength.current) {\n      setFlash(true)\n      const timer = setTimeout(() => setFlash(false), 2000)\n      return () => clearTimeout(timer)\n    }\n    prevLength.current = forks.lists.length\n  }, [forks.lists.length])\n\n  return (\n    <Flex gap=\"xs\" align=\"center\">\n      <ActionIcon\n        variant=\"subtle\"\n        size={20}\n        radius=\"xl\"\n        color={flash ? 'chatbox-secondary' : 'chatbox-tertiary'}\n        onClick={() => void switchFork(sessionId, msgId, 'prev')}\n      >\n        <IconChevronLeft />\n      </ActionIcon>\n      <ActionMenu\n        position=\"bottom\"\n        items={[\n          {\n            text: t('expand'),\n            icon: IconAlignRight,\n            onClick: () => expandFork(sessionId, msgId),\n          },\n          {\n            divider: true,\n          },\n          {\n            doubleCheck: true,\n            text: t('delete'),\n            icon: IconTrash,\n            onClick: () => deleteFork(sessionId, msgId),\n          },\n        ]}\n      >\n        <Text c={flash ? 'chatbox-secondary' : 'chatbox-tertiary'} size=\"xs\" className=\"cursor-pointer\">\n          {forks.position + 1} / {forks.lists.length}\n        </Text>\n      </ActionMenu>\n      <ActionIcon\n        variant=\"subtle\"\n        size={20}\n        radius=\"xl\"\n        color={flash ? 'chatbox-secondary' : 'chatbox-tertiary'}\n        onClick={() => switchFork(sessionId, msgId, 'next')}\n      >\n        <IconChevronRight />\n      </ActionIcon>\n    </Flex>\n  )\n}\n\ntype ThreadLabelProps = {\n  sessionId: string\n  thread: SessionThreadBrief\n}\nconst ThreadLabel: FC<ThreadLabelProps> = memo(({ thread, sessionId }) => {\n  const { t } = useTranslation()\n  const setShowHistoryDrawer = useSetAtom(atoms.showThreadHistoryDrawerAtom)\n\n  const handleOpenHistoryDrawer = useCallback(() => {\n    setShowHistoryDrawer(thread.id || true)\n  }, [setShowHistoryDrawer, thread.id])\n\n  const handleEditThreadName = useCallback(async () => {\n    if (!thread.id) return\n    await NiceModal.show('thread-name-edit', { sessionId, threadId: thread.id })\n  }, [thread.id])\n\n  const handleContinueThread = useCallback(() => {\n    if (!thread.id) return\n    void switchThread(sessionId, thread.id)\n  }, [sessionId, thread.id])\n\n  const handleMoveToConversations = useCallback(() => {\n    if (!thread.id) return\n    void moveThreadToConversations(sessionId, thread.id)\n  }, [sessionId, thread.id])\n\n  const handleDeleteThread = useCallback(() => {\n    if (!thread.id) return\n    void removeThread(sessionId, thread.id)\n  }, [sessionId, thread.id])\n\n  return (\n    <div className=\"text-center pb-4 pt-8\">\n      <ActionMenu\n        position=\"bottom\"\n        items={[\n          {\n            text: t('Edit Thread Name'),\n            icon: IconPencil,\n            onClick: handleEditThreadName,\n          },\n          {\n            text: t('Show in Thread List'),\n            icon: IconListTree,\n            onClick: handleOpenHistoryDrawer,\n          },\n          {\n            text: t('Continue this thread'),\n            icon: IconSwitch3,\n            onClick: handleContinueThread,\n          },\n          {\n            text: t('Move to Conversations'),\n            icon: IconMessagePlus,\n            onClick: handleMoveToConversations,\n          },\n          { divider: true },\n          {\n            doubleCheck: true,\n            text: t('delete'),\n            icon: IconTrash,\n            onClick: handleDeleteThread,\n          },\n        ]}\n      >\n        <span\n          className=\"cursor-pointer font-bold border-solid border rounded-xxl py-2 px-3 border-slate-400/25\"\n          onDoubleClick={handleOpenHistoryDrawer}\n          // onClick={onClick}\n        >\n          <span className=\"pr-1 opacity-60\">#</span>\n          <span className=\"truncate inline-block align-bottom max-w-[calc(50%-4rem)] md:max-w-[calc(30%-4rem)]\">\n            {thread.name || t('New Thread')}\n          </span>\n          {thread.createdAtLabel && <span className=\"pl-1 opacity-60 text-xs\">{thread.createdAtLabel}</span>}\n        </span>\n      </ActionMenu>\n    </div>\n  )\n})\n","/**\n * @license @tabler/icons-react v3.31.0 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nvar IconSwitch = createReactComponent(\"outline\", \"switch\", \"IconSwitch\", [[\"path\", { \"d\": \"M15 4l4 0l0 4\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M14.75 9.25l4.25 -5.25\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M5 19l4 -4\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M15 19l4 0l0 -4\", \"key\": \"svg-3\" }], [\"path\", { \"d\": \"M5 5l14 14\", \"key\": \"svg-4\" }]]);\n\nexport { IconSwitch as default };\n//# sourceMappingURL=IconSwitch.mjs.map\n","import NiceModal from '@ebay/nice-modal-react'\nimport { ActionIcon, Badge, Flex, Text } from '@mantine/core'\nimport { IconDots, IconEdit, IconSwitch, IconTrash } from '@tabler/icons-react'\nimport { useAtom, useAtomValue } from 'jotai'\nimport { useCallback, useMemo, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport type { Session, SessionThreadBrief } from 'src/shared/types'\nimport { useIsSmallScreen } from '@/hooks/useScreenChange'\nimport { currentSessionIdAtom, showThreadHistoryDrawerAtom } from '@/stores/atoms'\nimport { scrollToIndex } from '@/stores/scrollActions'\nimport { removeCurrentThread, removeThread, switchThread as switchThreadAction } from '@/stores/sessionActions'\nimport { getAllMessageList, getCurrentThreadHistoryHash } from '@/stores/sessionHelpers'\nimport { useLanguage } from '@/stores/settingsStore'\nimport ActionMenu from './ActionMenu'\nimport { Drawer } from './Overlay'\nimport { ScalableIcon } from './ScalableIcon'\n\nexport default function ThreadHistoryDrawer({ session }: { session: Session }) {\n  const { t } = useTranslation()\n  const language = useLanguage()\n  const [showDrawer, setShowDrawer] = useAtom(showThreadHistoryDrawerAtom)\n\n  const currentMessageList = useMemo(() => getAllMessageList(session), [session])\n\n  const currentThreadHistoryHash = useMemo(() => getCurrentThreadHistoryHash(session), [session])\n  const threadList = useMemo(\n    () => (currentThreadHistoryHash ? Object.values(currentThreadHistoryHash) : []),\n    [currentThreadHistoryHash]\n  )\n\n  const gotoThreadMessage = useCallback(\n    (threadId: string) => {\n      const thread = threadList.find((t) => t.id === threadId)\n      if (!thread) {\n        return\n      }\n      const msgIndex = currentMessageList.findIndex((m) => m.id === thread.firstMessageId)\n      if (msgIndex >= 0) {\n        scrollToIndex(msgIndex, 'start', 'smooth')\n      }\n      setShowDrawer(false)\n    },\n    [threadList, setShowDrawer, currentMessageList]\n  )\n\n  const handleSwitchThread = useCallback(\n    (threadId: string) => {\n      void switchThreadAction(session.id, threadId)\n      setShowDrawer(false)\n    },\n    [session.id, setShowDrawer]\n  )\n\n  return (\n    <Drawer\n      opened={!!showDrawer}\n      onClose={() => setShowDrawer(false)}\n      position={language === 'ar' ? 'left' : 'right'}\n      size={280}\n      title={t('Thread History')}\n      classNames={{\n        body: 'flex flex-col p-0 gap-xs',\n      }}\n    >\n      {threadList.map((thread, index) => (\n        <ThreadItem\n          key={thread.id}\n          thread={thread}\n          goto={gotoThreadMessage}\n          showHistoryDrawer={showDrawer}\n          switchThread={handleSwitchThread}\n          lastOne={index === threadList.length - 1}\n        />\n      ))}\n    </Drawer>\n  )\n}\n\nfunction ThreadItem(props: {\n  thread: SessionThreadBrief\n  goto(threadId: string): void\n  showHistoryDrawer: string | boolean\n  switchThread(threadId: string): void\n  lastOne?: boolean\n}) {\n  const { t } = useTranslation()\n  const { thread, goto, switchThread, lastOne } = props\n  const threadName = thread.name || t('New Thread')\n  const currentSessionId = useAtomValue(currentSessionIdAtom)\n  const isSmallScreen = useIsSmallScreen()\n\n  const [menuOpened, setMenuOpened] = useState(false)\n\n  const onEditButtonClick = useCallback(() => {\n    void NiceModal.show('thread-name-edit', { sessionId: currentSessionId, threadId: thread.id })\n  }, [currentSessionId, thread.id])\n\n  const onSwitchButtonClick = useCallback(() => {\n    switchThread(thread.id)\n  }, [switchThread, thread.id])\n\n  return (\n    <Flex\n      gap=\"sm\"\n      align=\"center\"\n      onClick={() => {\n        goto(thread.id)\n      }}\n      className=\"group/thread-item px-xs py-xxs cursor-pointer hover:bg-chatbox-background-gray-secondary\"\n    >\n      <Badge color=\"chatbox-tertiary\" size=\"xs\">\n        {thread.messageCount}\n      </Badge>\n      {/* <Text size=\"xs\" c=\"chatbox-tertiary\">\n        {thread.messageCount}\n      </Text> */}\n      <Text size=\"xs\" lineClamp={1} flex={1}>\n        {threadName} ({thread.createdAtLabel})\n      </Text>\n      <ActionMenu\n        position=\"bottom\"\n        items={[\n          { text: t('Edit Thread Name'), icon: IconEdit, onClick: onEditButtonClick },\n          { text: t('Switch'), icon: IconSwitch, onClick: onSwitchButtonClick },\n          {\n            divider: true,\n          },\n          {\n            doubleCheck: true,\n            text: t('delete'),\n            icon: IconTrash,\n            onClick: () => {\n              if (!currentSessionId) {\n                return\n              }\n              if (lastOne) {\n                void removeCurrentThread(currentSessionId)\n              } else {\n                void removeThread(currentSessionId, thread.id)\n              }\n            },\n          },\n        ]}\n        opened={menuOpened}\n        onChange={(opened) => setMenuOpened(opened)}\n      >\n        <ActionIcon\n          variant=\"transparent\"\n          color=\"chatbox-primary\"\n          className={isSmallScreen || menuOpened ? '' : 'group-hover/thread-item:visible invisible'}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <ScalableIcon icon={IconDots} />\n        </ActionIcon>\n      </ActionMenu>\n    </Flex>\n  )\n}\n","import { ErrorBoundary } from '@/components/ErrorBoundary';\nimport Header from '@/components/Header';\nimport InputBox from '@/components/InputBox/InputBox';\nimport MessageList, { type MessageListRef } from '@/components/MessageList';\nimport ThreadHistoryDrawer from '@/components/ThreadHistoryDrawer';\nimport { updateSession as updateSessionStore, useSession } from '@/stores/chatStore';\nimport { lastUsedModelStore } from '@/stores/lastUsedModelStore';\nimport * as scrollActions from '@/stores/scrollActions';\nimport { modifyMessage, removeCurrentThread, startNewThread, submitNewUserMessage } from '@/stores/sessionActions';\nimport { getAllMessageList } from '@/stores/sessionHelpers';\nimport NiceModal from '@ebay/nice-modal-react';\nimport { Button } from '@mantine/core';\nimport { useNavigate } from '@tanstack/react-router';\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport type { Message, ModelProvider } from 'src/shared/types';\nimport { useStore } from 'zustand';\nimport { Route } from \"D:/Downloads/chatbox-main/src/renderer/routes/session/$sessionId.tsx\";\nconst SplitComponent = function RouteComponent() {\n  const {\n    t\n  } = useTranslation();\n  const {\n    sessionId: currentSessionId\n  } = Route.useParams();\n  const navigate = useNavigate();\n  const {\n    session: currentSession,\n    isFetching\n  } = useSession(currentSessionId);\n  const setLastUsedChatModel = useStore(lastUsedModelStore, state => state.setChatModel);\n  const setLastUsedPictureModel = useStore(lastUsedModelStore, state => state.setPictureModel);\n  const currentMessageList = useMemo(() => currentSession ? getAllMessageList(currentSession) : [], [currentSession]);\n  const lastGeneratingMessage = useMemo(() => currentMessageList.find((m: Message) => m.generating), [currentMessageList]);\n  const messageListRef = useRef<MessageListRef>(null);\n  const goHome = useCallback(() => {\n    navigate({\n      to: '/',\n      replace: true\n    });\n  }, [navigate]);\n  useEffect(() => {\n    setTimeout(() => {\n      scrollActions.scrollToBottom('auto'); // 每次启动时自动滚动到底部\n    }, 200);\n  }, []);\n\n  // currentSession变化时（包括session settings变化），存下当前的settings作为新Session的默认值\n  useEffect(() => {\n    if (currentSession) {\n      if (currentSession.type === 'chat' && currentSession.settings) {\n        const {\n          provider,\n          modelId\n        } = currentSession.settings;\n        if (provider && modelId) {\n          setLastUsedChatModel(provider, modelId);\n        }\n      }\n      if (currentSession.type === 'picture' && currentSession.settings) {\n        const {\n          provider,\n          modelId\n        } = currentSession.settings;\n        if (provider && modelId) {\n          setLastUsedPictureModel(provider, modelId);\n        }\n      }\n    }\n  }, [currentSession?.settings, currentSession?.type, currentSession, setLastUsedChatModel, setLastUsedPictureModel]);\n  const onSelectModel = useCallback((provider: ModelProvider, modelId: string) => {\n    if (!currentSession) {\n      return;\n    }\n    void updateSessionStore(currentSession.id, {\n      settings: {\n        ...(currentSession.settings || {}),\n        provider,\n        modelId\n      }\n    });\n  }, [currentSession]);\n  const onStartNewThread = useCallback(() => {\n    if (!currentSession) {\n      return false;\n    }\n    void startNewThread(currentSession.id);\n    return true;\n  }, [currentSession]);\n  const onRollbackThread = useCallback(() => {\n    if (!currentSession) {\n      return false;\n    }\n    void removeCurrentThread(currentSession.id);\n    return true;\n  }, [currentSession]);\n  const onSubmit = useCallback(async ({\n    constructedMessage,\n    needGenerating = true\n  }: {\n    constructedMessage: Message;\n    needGenerating?: boolean;\n  }) => {\n    if (!currentSession) {\n      return;\n    }\n    messageListRef.current?.scrollToBottom('instant');\n    await submitNewUserMessage(currentSession.id, {\n      newUserMsg: constructedMessage,\n      needGenerating\n    });\n  }, [currentSession]);\n  const onClickSessionSettings = useCallback(() => {\n    if (!currentSession) {\n      return false;\n    }\n    NiceModal.show('session-settings', {\n      session: currentSession\n    });\n    return true;\n  }, [currentSession]);\n  const onStopGenerating = useCallback(() => {\n    if (!currentSession) {\n      return false;\n    }\n    if (lastGeneratingMessage?.generating) {\n      lastGeneratingMessage?.cancel?.();\n      void modifyMessage(currentSession.id, {\n        ...lastGeneratingMessage,\n        generating: false\n      }, true);\n    }\n    return true;\n  }, [currentSession, lastGeneratingMessage]);\n  const model = useMemo(() => {\n    if (!currentSession?.settings?.modelId || !currentSession?.settings?.provider) {\n      return undefined;\n    }\n    return {\n      provider: currentSession.settings.provider,\n      modelId: currentSession.settings.modelId\n    };\n  }, [currentSession?.settings?.provider, currentSession?.settings?.modelId]);\n  return currentSession ? <div className=\"flex flex-col h-full\">\n      <Header session={currentSession} />\n\n      {/* MessageList 设置 key，确保每个 session 对应新的 MessageList 实例 */}\n      <MessageList ref={messageListRef} key={`message-list${currentSessionId}`} currentSession={currentSession} />\n\n      {/* <ScrollButtons /> */}\n      <ErrorBoundary name=\"session-inputbox\">\n        <InputBox key={`input-box${currentSession.id}`} sessionId={currentSession.id} sessionType={currentSession.type} model={model} onStartNewThread={onStartNewThread} onRollbackThread={onRollbackThread} onSelectModel={onSelectModel} onClickSessionSettings={onClickSessionSettings} generating={!!lastGeneratingMessage} onSubmit={onSubmit} onStopGenerating={onStopGenerating} />\n      </ErrorBoundary>\n      <ThreadHistoryDrawer session={currentSession} />\n    </div> : !isFetching && <div className=\"flex flex-1 flex-col items-center justify-center min-h-[60vh]\">\n        <div className=\"text-2xl font-semibold text-gray-700 mb-4\">{t('Conversation not found')}</div>\n        <Button variant=\"outline\" onClick={goHome}>\n          {t('Back to HomePage')}\n        </Button>\n      </div>;\n};\nexport { SplitComponent as component };"],"names":["IconHistory","createReactComponent","IconDeviceFloppy","IconClearAll","Broom","props","size","stroke","title","others","width","height","viewBox","fill","xmlns","d","strokeWidth","strokeLinecap","strokeLinejoin","LayoutExpand","x","y","rx","LayoutShrink","t","Button","h","px","bd","radius","variant","color","leftSection","ScalableIcon","icon","IconRefresh","onClick","platform","installUpdate","Toolbar","sessionId","isSmallScreen","isLargeScreen","showUpdateNotification","setShowUpdateNotification","useState","setOpenSearchDialog","s","setThreadHistoryDrawerOpen","atoms","widthFull","setWidthFull","useEffect","offUpdateDownloaded","onUpdateDownloaded","handleExportAndSave","handleSessionClean","handleSessionDelete","async","router","navigate","to","replace","error","console","useCallback","session","data","Flex","align","gap","ActionIcon","IconSearch","ActionMenu","A","position","items","text","divider","doubleCheck","IconTrash","IconDots","className","Header","showSidebar","setShowSidebar","needRoomForMacWindowControls","useNeedRoomForWinControls","currentSession","settingActions","messages","some","msg","generating","length","name","id","threadName","clsx","mr","IconMenu2","IconLayoutSidebarLeftExpand","flex","justify","pl","pr","Title","order","fz","undefined","lineClamp","Tooltip","label","IconPencil","WindowControls","useThrottledCallback","callback","wait","handleCallback","latestInArgsRef","useRef","latestOutArgsRef","active","waitRef","timeoutRef","callThrottledCallback","args","current","timerCallback","window","setTimeout","throttled","clearTimeout","useThrottledCallbackWithClearTimeout","IconArrowBarToUp","IconAlignRight","IconListTree","IconSwitch3","IconMessagePlus","IconChevronsUp","IconChevronsDown","memo","visible","onVisibleChange","onScrollToTop","onScrollToBottom","onScrollToPrev","onScrollToNext","timerRef","handleMouseEnter","handleMouseLeave","onMouseEnter","onMouseLeave","Stack","p","MessageNavigationButton","Divider","IconChevronUp","IconChevronDown","Box","component","w","ScrollToBottomButton","style","bg","c","IconArrowDown","sessionScrollPositionCache","Map","MessageList","forwardRef","ref","currentThreadHash","useMemo","currentMessageList","virtuoso","messageListRef","setMessageListElement","setMessageScrolling","messageNavigationVisible","setMessageNavigationVisible","handleMessageNavigationVisibleChanged","v","handleScrollToTop","scrollToIndex","index","behavior","handleScrollToBottom","scrollTo","top","Infinity","handleScrollToPrev","containerRect","getBoundingClientRect","i","role","msgElement","querySelector","bottom","j","offset","handleScrollToNext","atBottom","setAtBottom","atTop","setAtTop","showScrollToPrev","setShowScrollToPrev","lastScrollTop","handleScrollTopThrottled","scrollTop","handleScroll","e","currentTarget","scrollHeight","clientHeight","currentVirtuoso","getState","state","ranges","set","platformType","useImperativeHandle","scrollToTop","scrollToBottom","cn","defaultCollapsed","settingsStore","autoCollapseCodeBlock","scrollbarGutter","followOutput","has","restoreStateFrom","get","initialScrollTop","initialTopMostItemIndex","increaseViewportBy","itemContent","pt","ThreadLabel","thread","ErrorBoundary","Message","sessionType","type","collapseThreshold","buttonGroup","assistantAvatarKey","sessionPicUrl","picUrl","messageForksHash","lists","mt","ForkNav","msgId","forks","atTopStateChange","atBottomStateChange","onScroll","Transition","mounted","transition","transitionStyle","IconArrowUp","map","item","idx","classNames","section","py","flash","setFlash","prevLength","timer","IconChevronLeft","Text","IconChevronRight","setShowHistoryDrawer","handleOpenHistoryDrawer","handleEditThreadName","threadId","handleContinueThread","handleMoveToConversations","handleDeleteThread","onDoubleClick","createdAtLabel","IconSwitch","ThreadHistoryDrawer","language","showDrawer","setShowDrawer","currentThreadHistoryHash","threadList","Object","values","gotoThreadMessage","find","msgIndex","findIndex","m","firstMessageId","handleSwitchThread","opened","onClose","body","ThreadItem","goto","showHistoryDrawer","switchThread","lastOne","currentSessionId","menuOpened","setMenuOpened","onEditButtonClick","onSwitchButtonClick","Badge","messageCount","IconEdit","onChange","stopPropagation","SplitComponent","useParams","useNavigate","isFetching","setLastUsedChatModel","lastUsedModelStore","setChatModel","setLastUsedPictureModel","setPictureModel","lastGeneratingMessage","goHome","scrollActions","settings","provider","modelId","onSelectModel","onStartNewThread","onRollbackThread","onSubmit","constructedMessage","needGenerating","newUserMsg","onClickSessionSettings","onStopGenerating","cancel","model","InputBox"],"sourceRoot":""}